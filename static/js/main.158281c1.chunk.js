(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(22)},17:function(e,t,a){},18:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),i=a(2),c=a(4),u=a(1);function s(e){(e.requestFullscreen||e.msRequestFullscreen||e.webkitRequestFullscreen).call(e)}var d=document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled,m=(document.exitFullscreen||document.msExitFullscreen||document.webkitExitFullscreen).bind(document);var p=navigator.userAgent.indexOf(" Trident/")>-1?"IE":navigator.userAgent.indexOf(" Edge/")>-1?"Edge":"Chrome",f=["Edge","IE"].indexOf(p)>-1,y={edge:{left:116,right:220,bottom:24},chrome:{left:24,right:24,bottom:16}}["Chrome"===p?"chrome":"edge"],v=function(e){var t=e.src,a=e.offset,n=e.timestamp,l=e.width,o=void 0===l?196:l,i=r.a.useRef(null);return r.a.useEffect(function(){i.current.currentTime=n},[n]),r.a.createElement("video",{className:"thumbnail",ref:i,controls:!1,autoPlay:!1,loop:!1,muted:!0,src:t,width:o,style:{left:a-o/2}})},b=10;function h(e){var t=e.offset,a=e.color,n={bottom:y.bottom+b/2,left:y.left+t-b/2};return r.a.createElement("svg",{className:"iomarker",width:b,height:b,viewBox:"0 0 2 2",style:n},r.a.createElement("circle",{cx:1,cy:1,r:1,fill:a}))}var E=function(e){var t=e.inTime,a=e.outTime,n=e.video;if(!t&&!a)return null;var l=n.duration,o=t||0,i=a||l,c=n.width-y.left-y.right,u=o/l*c,s=i/l*c;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{offset:u,color:"gold"}),r.a.createElement(h,{offset:s,color:"gold"}))},g=(a(17),function(e,t){return t in e&&e[t]()}),w=80,O=y.bottom+8,k=function(){var e=r.a.useState(),t=Object(c.a)(e,2),a=t[0],n=t[1];return[a,r.a.useCallback(function(e){return n(e)},[])]},j=3e3;function C(e){var t=e.showThumbnail,a=e.display,n=e.onLoad,l=e.onError,o=e.onDrag,i=e.size,d=e.onMouseOver,m=e.onMouseOut,b=e.objectFit,h=e.showOverlay,C=e.removeCallback,T=e.copyCallback,x=e.exclusiveCallback,R=e.inCallback,F=e.outCallback,D=e.speedCallback,S=k(),A=Object(c.a)(S,2),I=A[0],P=A[1],H=r.a.useState(),M=Object(c.a)(H,2),L=M[0],W=M[1],U=r.a.useState(),N=Object(c.a)(U,2),K=N[0],q=N[1];r.a.useEffect(function(){I&&(I.ontimeupdate=function(e){var t=a.out&&a.out<I.currentTime,n=a.in&&a.in>I.currentTime;(t||n)&&(I.currentTime=a.in||0)},I.addEventListener("mouseover",function(e){return I.focus()}))},[a.in,a.out,I]);var z=r.a.useCallback(function(e){if(I.height-e.layerY>O)return q(void 0);var t=I.width-y.left-y.right,a=(e.layerX-y.left)/t;if(a<0||a>1)return q(void 0);var n=I.duration*a;q({offset:e.layerX,timestamp:n})},[I]);r.a.useEffect(function(){I&&(I.playbackRate=a.playbackRate)},[a.playbackRate,I]),r.a.useEffect(function(){I&&(I.onmouseover=t&&"IE"!==p?z:null)},[t,z,I]),r.a.useEffect(function(){I&&(a.video=I,a.startTime?I.onload=function(){I.currentTime=a.startTime}:(I.onerror=l,I.onloadeddata=function(e){return I.currentTime=I.duration/2},I.onloadedmetadata=n),I.ondragstart=function(e){e.target.height-e.offsetY<w?e.preventDefault():o(a)},I.onmousemove=function(e){t&&"IE"!==p&&z(e),L&&clearTimeout(L),W(setTimeout(function(){return W(void 0)},j))},I.onmouseout=function(e){q(void 0)})},[a,z,o,l,n,L,t,I]);var X=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=I.duration*e),I.currentTime=(I.currentTime+e+I.duration)%I.duration},B={arrowleft:function(){return X(-.1,!0)},arrowright:function(){return X(.1,!0)},f:function(){return I&&s(I)}},V={m:function(){I.muted=!I.muted},arrowleft:function(){return X(-60)},arrowright:function(){return X(60)}};return r.a.createElement("div",Object.assign({className:"display"},i,{onMouseOver:d,onMouseOut:m,onKeyDown:function(e){return g(e.shiftKey?B:V,e.key.toLowerCase())}}),L&&r.a.createElement("div",{className:"display-border",style:Object(u.a)({},i,{pointerEvents:f?"none":"auto"})},"".concat(a.file.name).concat(1===a.playbackRate?"":" ("+a.playbackRate+"x)")),L&&r.a.createElement("div",{className:"display-controls"},r.a.createElement("button",{onClick:C},"X"),r.a.createElement("button",{onClick:T},"C"),r.a.createElement("button",{onClick:x},"E"),r.a.createElement("button",{onClick:R},"I"),r.a.createElement("button",{onClick:F},"O"),r.a.createElement("button",{onClick:function(){return D(2)}},"\xbb"),r.a.createElement("button",{onClick:function(){return D(.5)}},"\xab")),h&&r.a.createElement(E,{inTime:a.in,outTime:a.out,video:I}),t&&K&&r.a.createElement(v,Object.assign({src:a.url},K)),r.a.createElement("video",Object.assign({controls:!0,autoPlay:!0,loop:!0,muted:!0,ref:P,src:a.url,draggable:!f},i,{style:{objectFit:b}})))}a(18);var T=a(5),x=a(6),R=a.n(x),F=a(3),D=["contain","cover","fill","scale-down"],S=function(e){return Object(u.a)({},e,{id:R()(),startTime:e.video?(e.video.currentTime+60)%e.video.duration:0})},A=function(e,t){return e[(e.indexOf(t)+1)%e.length]},I=function(e,t){return[].concat(Object(i.a)(e.slice(0,t)),Object(i.a)(e.slice(t+1)))},P=function(e,t){var a=function(t){var a=e.activeIndex;if(void 0===a)return e;var n=e.displays,r=[].concat(Object(i.a)(n.slice(0,a)),[Object(u.a)({},n[a],t(n[a]))],Object(i.a)(n.slice(a+1)));return Object(u.a)({},e,{displays:r})},n=function(t){var a=e.displays.map(function(e){return Object(u.a)({},e,t(e))});return Object(u.a)({},e,a)};switch(t.type){case"nextAspect":return Object(u.a)({},e,{aspect:A(F,e.aspect)});case"nextFit":return Object(u.a)({},e,{fit:A(D,e.fit)});case"setExclusive":return Object(u.a)({},e,{activeIndex:0,displays:[e.displays[t.payload]]});case"toggleHelp":return Object(u.a)({},e,{showHelp:!e.showHelp});case"toggleThumbnails":return Object(u.a)({},e,{showThumbnails:!e.showThumbnails});case"setPartialState":return Object(u.a)({},e,t.payload);case"toggleFullscreen":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;d&&(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement?m():s(e))}(),e;case"removeActive":return void 0===e.activeIndex?e:Object(u.a)({},e,{displays:I(e.displays,e.activeIndex)});case"copyDisplay":var r=[].concat(Object(i.a)(e.displays),[S(e.displays[t.payload])]);return Object(u.a)({},e,{displays:r});case"reorderDisplays":var l=e.dragSrc;if(void 0===l)return e;var o=e.displays,c=o.indexOf(l),p=o.findIndex(function(e){return e.video===t.payload})||o.length-1,f=c>p?[].concat(Object(i.a)(o.slice(0,p)),[o[c]],Object(i.a)(o.slice(p,c)),Object(i.a)(o.slice(c+1))):[].concat(Object(i.a)(o.slice(0,c)),Object(i.a)(o.slice(c+1,p+1)),[o[c]],Object(i.a)(o.slice(p+1)));return Object(u.a)({},e,{displays:f});case"addCopies":var y=e.activeIndex;if(void 0===y)return e;var v=[].concat(Object(i.a)(e.displays),Object(i.a)(Object(i.a)(Array(t.payload)).map(function(){return S(e.displays[y])})));return Object(u.a)({},e,{displays:v});case"updateDisplay":var b=Object(i.a)(e.displays),h=t.payload,E=h.index,g=h.updates;return b[E]=Object(u.a)({},b[E],g),Object(u.a)({},e,{displays:b});case"applyToActive":return a(t.payload);case"applyToAll":return n(t.payload);case"setActiveIO":var w=t.payload;return a(function(e){return Object(T.a)({},w,void 0===e[w]?e.video.currentTime:void 0)});case"addFiles":var O=t.payload.map(function(e){return{id:R()(),file:e,url:URL.createObjectURL(e),playbackRate:1}});return Object(u.a)({},e,{firstLoad:!1,showHelp:e.showHelp&&0===O.length,displays:[].concat(Object(i.a)(e.displays),Object(i.a)(O))});case"handleDisplayError":var k=t.payload;return Object(u.a)({},e,{errorDisplays:[].concat(Object(i.a)(e.errorDisplays),[e.displays[k]]),displays:I(e.displays,k)});case"dismissErrors":return Object(u.a)({},e,{errorDisplays:[]});case"distributeTimes":var j=e.activeIndex;if(void 0===j)return e;var C=e.displays[j],x=C.video,P=C.file;if(!x)return e;var H=e.displays.filter(function(e){return e.file===P}),M=[C].concat(Object(i.a)(H.slice(j+1)),Object(i.a)(H.slice(0,j))),L=x.currentTime,W=x.duration,U=W/M.length;return M.forEach(function(e,t){var a=L+U*t;e.video.currentTime=a%W}),e;case"adjustActivePlaybackRate":return a(function(e){return{playbackRate:e.playbackRate*t.payload}});case"syncPlaybackRates":return n(function(e){return{playbackRate:t.payload}})}},H=r.a.createElement("section",{id:"shortcuts"},r.a.createElement("h2",null,"Shortcuts"),r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement("em",null,"C:")," Clone video (+1m)"),r.a.createElement("li",null,r.a.createElement("em",null,"D:")," Distribute times"),r.a.createElement("li",null,r.a.createElement("em",null,"E:")," Remove everything else"),r.a.createElement("li",null,r.a.createElement("em",null,"F:")," Toggle fullscreen"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift+F:")," Fullscreen video"),r.a.createElement("li",null,r.a.createElement("em",null,"H:")," Toggle help"),r.a.createElement("li",null,r.a.createElement("em",null,"I:")," Toggle in point"),r.a.createElement("li",null,r.a.createElement("em",null,"O:")," Toggle out point"),r.a.createElement("li",null,r.a.createElement("em",null,"M:")," Toggle mute"),r.a.createElement("li",null,r.a.createElement("em",null,"R:")," Remove video"),r.a.createElement("li",null,r.a.createElement("em",null,"S:")," Change video scaling"),r.a.createElement("li",null,r.a.createElement("em",null,"X:")," Change aspect ratio"),r.a.createElement("li",null,r.a.createElement("em",null,"\u2190 \u2192:")," Skip 1m"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift \u2190 \u2192:")," Skip 10%"),r.a.createElement("li",null,r.a.createElement("em",null,"Ctrl \u2190 \u2192:")," Change speed"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift+S")," Sync speeds"),r.a.createElement("li",null,r.a.createElement("em",null,"Ctrl+W:")," Close tab"),r.a.createElement("li",null,r.a.createElement("em",null,"O,O:")," Restart video"),r.a.createElement("li",null,r.a.createElement("em",null,"2-9:")," Fill 2-9 size grid"),r.a.createElement("li",null,r.a.createElement("em",null,"Drag+Drop:")," Reorder videos"))),M=r.a.createElement("footer",null,r.a.createElement("h2",null,"Privacy Disclaimer"),r.a.createElement("p",null,"This tool records ",r.a.createElement("b",null,"no")," filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded."));function L(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:e.name},e.label),r.a.createElement("select",{name:e.name,value:e.value,onChange:function(t){return e.callback(t.target.value)}},e.choices))}var W=function(e){return r.a.createElement("section",{id:"help"},r.a.createElement("h2",null,"Usage"),r.a.createElement("p",null,"Drag and drop any number of videos to auto-play in an optimally arranged grid."),r.a.createElement("section",{id:"settings"},r.a.createElement("h2",null,"Settings"),r.a.createElement("form",null,r.a.createElement(L,{name:"objectScale",label:"Video Fit/Fill",value:e.objectFit,choices:D.map(function(e){return r.a.createElement("option",{key:e,value:e},e[0].toUpperCase()+e.substr(1))}),callback:function(t){return e.objectFitCallback(t)}}),r.a.createElement("br",null),r.a.createElement(L,{name:"aspectRatio",label:"Aspect Ratio",value:F.indexOf(e.aspectRatio).toString(),choices:F.map(function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)}),callback:function(t){return e.aspectRatioCallback(F[parseInt(t)])}}),r.a.createElement("br",null))),H,M)};function U(e){var t=e.errorDisplays,a=e.dismissCallback;return r.a.createElement("section",{id:"errors"},r.a.createElement("h2",null,"Errors"),r.a.createElement("ol",null,t.map(function(e,t){return r.a.createElement("li",{key:t},e.file.name," (",e.file.type,")")})),r.a.createElement("p",null,"Only videos supported by your web browser will play successfully.  ",r.a.createElement("code",null,".mp4")," and ",r.a.createElement("code",null,".webm")," files are good bets."),r.a.createElement("form",{onSubmit:a},r.a.createElement("button",null,"Dismiss")))}function N(){return r.a.createElement("section",{id:"splash"},r.a.createElement("p",null,"Auto-play any number of videos or copies of videos in an optimally arranged grid with simple drag-and-drop.  Videos start half-way in and loop, ensuring immediate, continuous immersion, great for scouring surveillance footage, finding the best highlights from your last gaming stream, and more!"),r.a.createElement("p",null,"Find your favourite moments quickly with thumbnail scrubbing and keyboard shortcuts to jump ahead in time 1m (\u2192) or 10% (Shift \u2192), or adjust playback speed (Ctrl \u2192)."),r.a.createElement("p",null,"Use shortcut keys to rapidly (c)opy or (r)emove displays, set (i)n/(o)ut loop points, (f)ullscreen the display, toggle (m)ute, etc."))}a(21);var K=function(e){return e.reduce(function(e,t){return e+t},0)/e.length};function q(e){e.preventDefault(),e.stopPropagation()}var z=function(){var e=r.a.useReducer(P,{showHelp:!0,showThumbnails:!0,firstLoad:!0,displays:[],errorDisplays:[],aspect:F[0],fit:D[0]}),t=Object(c.a)(e,2),a=t[0],n=t[1],l=r.a.useRef(null),o={f:{type:"toggleFullscreen"},h:{type:"toggleHelp"},s:{type:"nextFit"},t:{type:"toggleThumbnails"},x:{type:"nextAspect"}};r.a.useLayoutEffect(function(){var e=function(){var e=l.current,t={viewport:{width:e.clientWidth,height:e.clientHeight}};n({type:"setPartialState",payload:t})};window.onresize=function(){return e()},e()},[]),r.a.useEffect(function(){document.ondragover=q,document.ondragenter=q,document.ondragleave=q},[]),r.a.useEffect(function(){window.onkeydown=function(e){var t=e.key.toLowerCase();if(t in o&&!e.shiftKey&&!e.ctrlKey)return n(o[t]);var r=a.activeIndex;if(void 0!==r){var l={arrowleft:{type:"adjustActivePlaybackRate",payload:.5},arrowright:{type:"adjustActivePlaybackRate",payload:2}},i={s:{type:"syncPlaybackRates",payload:a.displays[r].video.playbackRate}},c={delete:{type:"removeActive"},c:{type:"copyDisplay",payload:r},d:{type:"distributeTimes",payload:r},e:{type:"setExclusive",payload:r},i:{type:"setActiveIO",payload:"in"},o:{type:"setActiveIO",payload:"out"},r:{type:"removeActive"}};e.shiftKey?t in i&&n(i[t]):e.ctrlKey?t in l&&n(l[t]):(t in c&&n(c[t]),t>="2"&&t<="9"&&(n({type:"addCopies",payload:parseInt(t)}),n({type:"distributeTimes",payload:r})))}}},[a.displays,a.activeIndex,o]),r.a.useEffect(function(){document.ondrop=function(e){if(q(e),e.dataTransfer){var t=e.dataTransfer.files;n({type:"addFiles",payload:Array.from(t)})}}},[]);var u=r.a.useCallback(function(){var e=K(a.displays.map(function(e){return e.video.videoWidth/e.video.videoHeight}));return Object(i.a)(F).sort(function(t,a){return Math.abs(e-a.ratio)-Math.abs(e-t.ratio)}).pop()},[a.displays]),s=r.a.useMemo(function(){return function(e,t,a){for(var n=0,r=0,l=0,o=1;o<=t;o++){var i=Math.ceil(t/o),c=Math.floor(a.width/i),u=Math.floor(a.height/o),s=c,d=u;e>c/u?d=s/e:s=d*e;var m=s*d;m<n||(n=m,r=c,l=u)}return{width:r,height:l}}(a.aspect.ratio,a.displays.length,a.viewport||{width:1,height:1})},[a.aspect,a.displays,a.viewport]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{ref:l,onDrop:function(e){return n({type:"reorderDisplays",payload:e.target})}},0===a.displays.length&&r.a.createElement(N,null),a.displays.map(function(e,t){return r.a.createElement(C,{size:s,objectFit:a.fit,key:e.id,display:e,showOverlay:a.activeIndex===t,showThumbnail:a.showThumbnails,onDrag:function(t){return n({type:"setPartialState",payload:{dragSrc:e}})},onMouseOver:function(){return n({type:"setPartialState",payload:{activeIndex:t}})},onMouseOut:function(){return n({type:"setPartialState",payload:{activeIndex:void 0}})},onLoad:function(){return n({type:"setPartialState",payload:{aspect:u()}})},onError:function(){return n({type:"handleDisplayError",payload:t})},removeCallback:function(){return n({type:"removeActive"})},copyCallback:function(){return n({type:"copyDisplay",payload:t})},exclusiveCallback:function(){return n({type:"setExclusive",payload:t})},staggerCallback:function(){return n({type:"distributeTimes",payload:t})},inCallback:function(){return n({type:"setActiveIO",payload:"in"})},outCallback:function(){return n({type:"setActiveIO",payload:"out"})},speedCallback:function(e){return n({type:"adjustActivePlaybackRate",payload:e})}})})),a.errorDisplays.length>0&&r.a.createElement(U,{errorDisplays:a.errorDisplays,dismissCallback:function(){return n({type:"dismissErrors"})}}),a.showHelp&&r.a.createElement(W,{aspectRatio:a.aspect,objectFit:a.fit,aspectRatioCallback:function(e){return n({type:"setPartialState",payload:{aspect:e}})},objectFitCallback:function(e){return n({type:"setPartialState",payload:{fit:e}})}}))},X=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");X?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):B(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):B(t,e)})}}()},3:function(e){e.exports=[{ratio:1.7777777777777777,name:"16:9 (High Def)"},{ratio:1.3333333333333333,name:"4:3 (Standard Def)"},{ratio:1,name:"1:1 (Square)"},{ratio:.5625,name:"9:16 (Vertical HD)"},{ratio:1.85,name:"1.85:1 (Cinematic)"},{ratio:2.35,name:"2.35:1 (Anamorphic)"}]}},[[11,1,2]]]);
//# sourceMappingURL=main.158281c1.chunk.js.map