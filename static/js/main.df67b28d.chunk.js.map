{"version":3,"sources":["AspectRatio.ts","App.tsx","serviceWorker.js","index.js"],"names":["ASPECT_RATIOS","ratio","name","OBJECT_FITS","SPLASH","react_default","a","createElement","id","HELP","stopDragDrop","e","preventDefault","stopPropagation","IOMarker","_ref","offset","xPadding","color","className","width","height","style","bottom","yPadding","left","diameter","viewBox","cx","cy","r","fill","adjustDisplayTime","display","adjustment","percentage","arguments","length","undefined","vid","video","end","seekable","diff","currentTime","BDVideo","React","createRef","_this$props","this","props","inTime","outTime","current","ontimeupdate","pastOut","beforeIn","rate","playbackRate","setIO","_this$props2","onLoad","onError","onDrag","startTime","onerror","onloadeddata","onloadedmetadata","ondragstart","target","offsetY","_this$props3","duration","ip","op","timelineWidth","ix","ox","Fragment","_this$props4","size","onMouseOver","onMouseOut","objectFit","showOverlay","Object","assign","concat","file","getIO","controls","autoPlay","loop","muted","src","url","draggable","ref","title","Component","App","_this2","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","viewport","globalActions","f","document","fullscreenEnabled","fullscreenElement","exitFullscreen","body","requestFullscreen","h","setState","showHelp","state","s","nextObjectFit","x","nextDimensionRatio","showInfo","displays","maxId","ratioIndex","aspectRatio","objectFitIndex","firstBatch","errorDisplays","window","onresize","updateDimensions","onkeydown","ev","key","altCase","toLowerCase","toUpperCase","executeAction","actions","altKey","activeDisplay","shiftKey","ArrowLeft","ArrowRight","ctrlKey","adjustVideoSpeed","Delete","deleteDisplay","d","c","copyDisplay","i","setVideoIO","o","m","ondragover","ondragenter","ondragleave","ondrop","dataTransfer","droppedFiles","files","videoFiles","Array","from","filter","type","startsWith","newDisplays","map","URL","createObjectURL","triggerResize","_this$state","y","smallest","bestrows","bestcols","rows","cols","Math","ceil","min","mode","vp","clientWidth","clientHeight","activeVideo","newDisplay","videoWidth","videoHeight","avgRatio","getAspectRatios","reduce","b","closestRatio","toConsumableArray","sort","pop","findIndex","getRecommendedAspectRatioIndex","_this$state2","push","dest","_this$state3","dragSrc","destDisplay","si","indexOf","tmpDisplays","slice","di","_this3","_this$state4","lastDisplay","getVideoSize","onDrop","reorderDisplays","App_BDVideo","setRecommendedAspectRatio","handleVideoError","in","out","onSubmit","Boolean","location","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.df67b28d.chunk.js","sourcesContent":["export interface AspectRatio {\r\n\tratio:number,\r\n\tname:string\r\n}\r\n\r\nexport const ASPECT_RATIOS = [\r\n\t{\r\n\t\tratio: 16/9,\r\n\t\tname: \"16:9 (High Definition)\"\r\n\t}, {\r\n\t\tratio: 4/3,\r\n\t\tname: \"4:3 (Standard Definition)\"\r\n\t}, {\r\n\t\tratio: 1,\r\n\t\tname: \"1:1 (Square)\",\r\n\t}, {\r\n\t\tratio: 9/16,\r\n\t\tname: \"9:16 (Vertical HD)\"\r\n\t}, {\r\n\t\tratio: 1.85,\r\n\t\tname: \"1.85:1 (Cinematic Wide)\"\r\n\t}, {\r\n\t\tratio: 2.35,\r\n\t\tname: \"2.35:1 (Anamorphic Wide)\"\r\n\t}\r\n]","import React from 'react'\nimport './App.css'\nimport {AspectRatio, ASPECT_RATIOS} from './AspectRatio'\n\n// TODO: add logo\n// TODO: refence react as third party library on cdn?\n\n// TODO: fix this TypeScript hack\ntype ObjectFit = \"fill\"|\"contain\"|\"cover\"|\"scale-down\"\nconst OBJECT_FITS = ['contain', 'cover', 'fill', 'scale-down'] as ObjectFit[]\n\nconst SPLASH = <section id=\"splash\">\n\t<p>Videos start half-way in and loop, ensuring immediate, continuous action, but also start muted to avoid chaotic, clashing audio and prevent disturbing others.</p>\n</section>\n\nconst HELP = <section id=\"help\">\n\t<h2>Usage</h2>\n\t<p>Drag and drop any number of videos to auto-play in an optimally arranged grid.</p>\n\t<p>Videos start half-way in and loop, ensuring immediate, continuous action, but also start muted to avoid chaotic, clashing audio and prevent disturbing others.</p>\n\t<h2>Shortcuts</h2><ol>\n\t\t<li><em>C:</em> Clone video (+1m)</li>\n\t\t<li><em>D:</em> Delete video</li>\n\t\t<li><em>H:</em> Toggle help</li>\n\t\t{/* <li><em>I:</em> Toggle info overlay</li> */}\n\t\t<li><em>M:</em> Toggle mute</li>\n\t\t<li><em>S:</em> Change video scaling</li>\n\t\t<li><em>X:</em> Change aspect ratio</li>\n\t\t<li><em>← →:</em> Skip 1m</li>\n\t\t<li><em>Shift ← →:</em> Skip 10%</li>\n\t\t<li><em>Ctrl ← →:</em> Change speed</li>\n\t\t<li><em>Ctrl+W:</em> Close tab</li>\n\t\t<li><em>F / F11:</em> Toggle fullscreen</li>\n\t\t<li><em>I / O:</em> Toggle in / out time</li>\n\t\t<li>Drag&amp;Drop: Reorder videos</li>\n\t</ol>\n\t<footer>\n\t\t<h2>Privacy Disclaimer</h2>\n\t\t<p>This tool records <b>no</b> filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded.</p>\n\t</footer>\n</section>\n\nfunction stopDragDrop(e:Event) {\n\te.preventDefault()\n\te.stopPropagation()\n}\n\nfunction toggleMute(video?:HTMLVideoElement) {\n\tif (!video) return\n\tvideo.muted = !video.muted\n}\n\ninterface IOMarkerProps {\n\toffset:number,\n\txPadding:number,\n\tcolor:string\n}\nfunction IOMarker({offset, xPadding, color}:IOMarkerProps) {\n\tconst diameter = 10\n\tconst yPadding = 16\n\treturn <svg className=\"iomarker\" width={diameter} height={diameter} style={{bottom: yPadding + (diameter/2), left: xPadding + offset - (diameter/2)}} viewBox={`0 0 2 2`}>\n\t\t<circle cx={1} cy={1} r={1} fill={color} />\n\t</svg>\n}\n\nfunction adjustDisplayTime(display:Display, adjustment:number, percentage:boolean = false) {\n\tconst vid = display.video\n\tif (!vid) return\n\tconst end = vid.seekable.end(0)\n\tif (percentage) {\n\t\tadjustment = end * adjustment\n\t}\n\tconst diff = end - vid.currentTime\n\tif (adjustment > diff) {\n\t\tvid.currentTime = adjustment - diff\n\t} else {\n\t\tvid.currentTime = vid.currentTime + adjustment\n\t}\n}\n\ninterface Display {\n\tid:number,\n\tfile:File,\n\turl:string,\n\tstartTime?:number,\n\tin?:number,\n\tout?:number,\n\tvideo?:HTMLVideoElement,\n\ttriggerResize:boolean,\n\tplaybackRate:number\n}\n\ninterface BDVideoProps {\n\tdisplay:Display,\n\tobjectFit:ObjectFit,\n\tsize: {\n\t\twidth:number,\n\t\theight:number\n\t},\n\tshowOverlay:boolean,\n\tinTime?:number,\n\toutTime?:number,\n\tplaybackRate:number,\n\tonMouseOver:()=>void,\n\tonMouseOut:()=>void,\n\tonLoad:()=>void\n\tonError:()=>void\n\tonDrag:(display:Display)=>void\n}\n\nclass BDVideo extends React.Component<BDVideoProps> {\n\tvideo = React.createRef<HTMLVideoElement>()\n\n\tsetIO() {\n\t\tconst {inTime, outTime} = this.props\n\t\tconst video = this.video.current!\n\t\tvideo.ontimeupdate = e => {\n\t\t\tconst pastOut = outTime && outTime < video.currentTime\n\t\t\tconst beforeIn = inTime && inTime > video.currentTime\n\t\t\tif (pastOut || beforeIn) video.currentTime = inTime || 0\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tconst {playbackRate} = this.props\n\t\tconst video = this.video.current!\n\t\tconst rate = playbackRate || 1\n\t\tvideo.playbackRate = rate\n\t\tthis.setIO()\n\t}\n\n\tcomponentDidMount() {\n\t\tconst {display, onLoad, onError, onDrag} = this.props\n\t\tconst video = this.video.current!\n\t\tdisplay.video = video\n\t\tif (display.startTime) {\n\t\t\tvideo.currentTime = display.startTime\n\t\t} else {\n\t\t\tvideo.onerror = onError\n\t\t\tvideo.onloadeddata = e => video.currentTime = video.seekable.end(0) / 2\n\t\t\tvideo.onloadedmetadata = onLoad\n\t\t}\n\t\tvideo.ondragstart = e => {\n\t\t\tconst target = e.target! as HTMLVideoElement\n\t\t\tconst distanceFromBottom = target.height - e.offsetY\n\t\t\tif (distanceFromBottom < 80) {\n\t\t\t\te.preventDefault()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tonDrag(display)\n\t\t}\n\t\tthis.setIO()\n\t}\n\n\tgetIO() {\n\t\tconst {inTime, outTime} = this.props\n\t\tconst video = this.video.current!\n\n\t\tif (inTime || outTime) {\n\t\t\tconst xPadding = video.width * .02\n\t\t\tconst duration = video.seekable.end(0)\n\t\t\tconst ip = inTime || 0\n\t\t\tconst op = outTime || duration\n\t\t\tconst timelineWidth = video.width - (xPadding*2)\n\t\t\tconst ix = (ip / duration) * timelineWidth\n\t\t\tconst ox = (op / duration) * timelineWidth\n\t\t\treturn <>\n\t\t\t\t<IOMarker xPadding={xPadding} offset={ix} color=\"green\" />\n\t\t\t\t<IOMarker xPadding={xPadding} offset={ox} color=\"red\" />\n\t\t\t</>\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {size, onMouseOver, onMouseOut, display, objectFit, showOverlay} = this.props\n\n\t\treturn <div className=\"display\" {...size} onMouseOver={onMouseOver} onMouseOut={onMouseOut}>\n\t\t\t<div className=\"display-border\" style={{width: `${size.width}px`, height: `${size.height}px`}}>{showOverlay && display.file.name}</div>\n\t\t\t{showOverlay && this.getIO()}\n\t\t\t<video controls={true} autoPlay={true} loop={true} muted={true} src={display.url} draggable={true}\n\t\t\t\t{...size} ref={this.video} style={{objectFit}} title={display.file.name} />\n\t\t</div>\n\t}\n}\n\ninterface Dimensions {\n\tx:number,\n\ty:number\n}\n\ninterface AppState {\n\tshowInfo:boolean,\n\tshowHelp:boolean,\n\tdisplays:Display[],\n\tmaxId:number,\n\tactiveDisplay?:Display,\n\tlastDisplay?:Display,\n\tviewport?:Dimensions,\n\tratioIndex:number,\n\taspectRatio:AspectRatio,\n\tobjectFitIndex:number,\n\tobjectFit:ObjectFit,\n\tfirstBatch:boolean,\n\terrorDisplays:Display[],\n\tdragSrc?:Display\n}\n\ninterface ActionControls {\n\t[key:string]: ()=>void\n}\n\nfunction toggleFullscreen() {\n\tif (!document.fullscreenEnabled) return\n\tif (document.fullscreenElement) {\n\t\tdocument.exitFullscreen()\n\t} else {\n\t\tdocument.body.requestFullscreen()\n\t}\n}\n\nclass App extends React.Component<{},AppState> {\n\tviewport:React.RefObject<HTMLElement>\n\tglobalActions = {\n\t\t\"f\": () => toggleFullscreen(),\n\t\t\"h\": () => this.setState({showHelp: !this.state.showHelp}),\n\t\t// \"i\": () => this.setState({showInfo: !this.state.showInfo}),\n\t\t\"s\": () => this.nextObjectFit(),\n\t\t\"x\": () => this.nextDimensionRatio()\n\t} as ActionControls\n\n\tconstructor(props:{}) {\n\t\tsuper(props)\n\t\tthis.viewport = React.createRef<HTMLElement>()\n\t\tthis.state = {\n\t\t\tshowInfo: false,\n\t\t\tshowHelp: true,\n\t\t\tdisplays: [],\n\t\t\tmaxId: 0,\n\t\t\tratioIndex: 0,\n\t\t\taspectRatio: ASPECT_RATIOS[0],\n\t\t\tobjectFitIndex: 0,\n\t\t\tobjectFit: OBJECT_FITS[0],\n\t\t\tfirstBatch: true,\n\t\t\terrorDisplays: [],\n\t\t}\n\n\t\twindow.onresize = () => this.updateDimensions()\n\n\t\twindow.onkeydown = ev => {\n\t\t\tconst key = ev.key\n\t\t\tconst altCase = key.toLowerCase() == key ? key.toUpperCase() : key.toLowerCase()\n\t\t\t\n\t\t\tfunction executeAction(actions:ActionControls, key:string, altKey?:string) {\n\t\t\t\tif (key in actions) {\n\t\t\t\t\tactions[key]()\n\t\t\t\t\treturn true\n\t\t\t\t} else if (altKey && altKey in actions) {\n\t\t\t\t\tactions[altKey]()\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (executeAction(this.globalActions, key, altCase)) return\n\n\t\t\tconst {activeDisplay} = this.state\n\t\t\tif (!activeDisplay) return\n\n\t\t\tif (ev.shiftKey) {\n\t\t\t\tconst shiftDisplayActions = {\n\t\t\t\t\t\"ArrowLeft\": () => adjustDisplayTime(activeDisplay, -.1, true),\n\t\t\t\t\t\"ArrowRight\": () => adjustDisplayTime(activeDisplay, .1, true),\n\t\t\t\t} as ActionControls\n\t\t\t\texecuteAction(shiftDisplayActions, key, altCase)\n\t\t\t} else if (ev.ctrlKey) {\n\t\t\t\tconst ctrlDisplayActions = {\n\t\t\t\t\t\"ArrowLeft\": () => this.adjustVideoSpeed(activeDisplay, 0.5),\n\t\t\t\t\t\"ArrowRight\": () => this.adjustVideoSpeed(activeDisplay, 2)\n\t\t\t\t}\n\t\t\t\texecuteAction(ctrlDisplayActions, key, altCase)\n\t\t\t} else {\n\t\t\t\tconst displayActions = {\n\t\t\t\t\t\"Delete\": () => this.deleteDisplay(activeDisplay),\n\t\t\t\t\t\"d\": () => this.deleteDisplay(activeDisplay),\n\t\t\t\t\t\"c\": () => this.copyDisplay(activeDisplay),\n\t\t\t\t\t\"i\": () => this.setVideoIO(activeDisplay, \"in\"),\n\t\t\t\t\t\"o\": () => this.setVideoIO(activeDisplay, \"out\"),\n\t\t\t\t\t\"ArrowLeft\": () => adjustDisplayTime(activeDisplay, -60),\n\t\t\t\t\t\"ArrowRight\": () => adjustDisplayTime(activeDisplay, 60),\n\t\t\t\t\t\"m\": () => toggleMute(activeDisplay.video)\n\t\t\t\t} as ActionControls\n\t\t\t\texecuteAction(displayActions, key, altCase)\n\t\t\t}\n\t\t}\n\n\t\tdocument.ondragover = stopDragDrop\n\t\tdocument.ondragenter = stopDragDrop\n\t\tdocument.ondragleave = stopDragDrop\n\n\t\tdocument.ondrop = (e:DragEvent) => {\n\t\t\tstopDragDrop(e)\n\t\t\tif (!e.dataTransfer) return\n\t\t\tconst {firstBatch} = this.state\n\t\t\tlet droppedFiles = e.dataTransfer.files as FileList\n\t\t\tconst videoFiles = Array.from(droppedFiles).filter(i => i.type.startsWith('video/'))\n\t\t\tlet maxId = this.state.maxId\n\t\t\tconst newDisplays = videoFiles.map(file => { return {\n\t\t\t\tid: ++maxId,\n\t\t\t\tfile,\n\t\t\t\turl: URL.createObjectURL(file),\n\t\t\t\ttriggerResize: firstBatch,\n\t\t\t\tplaybackRate: 1\n\t\t\t} as Display})\n\n\t\t\tthis.setState({\n\t\t\t\tdisplays: this.state.displays.concat(newDisplays),\n\t\t\t\tmaxId,\n\t\t\t\tfirstBatch: false,\n\t\t\t\t// hide help if we are adding videos\n\t\t\t\tshowHelp: this.state.showHelp && videoFiles.length == 0\n\t\t\t})\n\t\t}\n\t}\n\n\tgetVideoSize() {\n\t\tconst {displays, aspectRatio, viewport} = this.state\n\t\tif (!viewport) return {width: 1, height: 1}\n\t\tif (displays.length < 2) return {width: viewport.x, height: viewport.y}\n\n\t\tlet smallest = 0, bestrows = 0, bestcols = 0\n\t\tfor (let rows = 1; rows < displays.length; rows++) {\n\t\t\tlet cols = Math.ceil(displays.length / rows)\n\t\t\tlet x = viewport.x / cols\n\t\t\tlet y = viewport.y * aspectRatio.ratio / rows\n\n\t\t\t// if neither are smaller, replace\n\t\t\tif (smallest <= x && smallest <= y) {\n\t\t\t\tsmallest = Math.min(x, y)\n\t\t\t\tbestrows = rows\n\t\t\t\tbestcols = cols\n\t\t\t} else {\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\twidth: viewport.x / bestcols,\n\t\t\theight: viewport.y / bestrows\n\t\t}\n\t}\n\n\tadjustVideoSpeed(display:Display, adjustment:number) {\n\t\tdisplay.playbackRate = display.playbackRate * adjustment\n\t\tthis.setState({displays: this.state.displays})\n\t}\n\n\tsetVideoIO(display:Display, mode:\"in\"|\"out\") {\n\t\tif (mode in display) {\n\t\t\tdelete display[mode]\n\t\t} else {\n\t\t\tdisplay[mode] = display.video!.currentTime\n\t\t}\n\t\t// not sure if this way of updating the display will work\n\t\tthis.setState({displays: this.state.displays})\n\t}\n\n\tupdateDimensions() {\n\t\tconst vp = this.viewport.current!\n\t\tconst viewport = {x: vp.clientWidth, y: vp.clientHeight}\n\t\tthis.setState({viewport})\n\t}\n\n\tcopyDisplay(display:Display) {\n\t\tconst activeVideo = display.video\n\t\tconst maxId = this.state.maxId + 1\n\t\tlet startTime = activeVideo!.currentTime + 60\n\t\tif (startTime > activeVideo!.seekable.end(0)) startTime = 0\n\t\tconst newDisplay = {\n\t\t\tid: maxId,\n\t\t\tfile: display.file,\n\t\t\turl: display.url,\n\t\t\tplaybackRate: display.playbackRate,\n\t\t\tstartTime,\n\t\t\ttriggerResize: false\n\t\t}\n\t\tthis.setState({ maxId, displays: this.state.displays.concat(newDisplay)})\n\t}\n\n\tdeleteDisplay(display:Display) {\n\t\tthis.setState({ displays: this.state.displays.filter(i => i != display) })\n\t}\n\n\tnextDimensionRatio() {\n\t\tlet i = this.state.ratioIndex + 1\n\t\tif (i >= ASPECT_RATIOS.length) i = 0\n\t\tthis.setState({\n\t\t\tratioIndex: i,\n\t\t\taspectRatio: ASPECT_RATIOS[i]\n\t\t})\n\t}\n\n\tnextObjectFit() {\n\t\tlet i = this.state.objectFitIndex + 1\n\t\tif (i >= OBJECT_FITS.length) i = 0\n\t\tthis.setState({\n\t\t\tobjectFitIndex: i,\n\t\t\tobjectFit: OBJECT_FITS[i]\n\t\t})\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.updateDimensions()\n\t}\n\n\tgetAspectRatios() {\n\t\treturn this.state.displays.map(i => i.video!.videoWidth / i.video!.videoHeight)\n\t}\n\n\tgetRecommendedAspectRatioIndex() {\n\t\tconst avgRatio = this.getAspectRatios().reduce((a,b) => a + b, 0) / this.state.displays.length\n\t\tconst closestRatio = [...ASPECT_RATIOS].sort((a, b) => Math.min(a.ratio / avgRatio, avgRatio / a.ratio) - Math.min(b.ratio/avgRatio, avgRatio / b.ratio)).pop()\n\t\tconst i = ASPECT_RATIOS.findIndex(i => i.name == closestRatio!.name)\n\t\treturn i\n\t}\n\n\tsetRecommendedAspectRatio() {\n\t\tconst i = this.getRecommendedAspectRatioIndex()\n\t\tthis.setState({\n\t\t\taspectRatio: ASPECT_RATIOS[i],\n\t\t\tratioIndex: i\n\t\t})\n\t}\n\n\thandleVideoError(display:Display) {\n\t\tconst {displays, errorDisplays} = this.state\n\t\terrorDisplays.push(display)\n\t\tthis.setState({\n\t\t\tdisplays: displays.filter(i => i != display),\n\t\t\terrorDisplays\n\t\t})\n\t}\n\n\treorderDisplays(dest:EventTarget) {\n\t\tconst {displays, dragSrc} = this.state\n\t\tif (!dragSrc) return\n\t\tconst destDisplay = displays.filter(i => i.video == dest).pop() || displays[displays.length-1]\n\t\tconst si = displays.indexOf(dragSrc)\n\t\tconst tmpDisplays = [...displays.slice(0, si), ...displays.slice(si+1)]\n\t\tconst di = tmpDisplays.indexOf(destDisplay)\n\t\tconst newDisplays = [...tmpDisplays.slice(0, di+1), dragSrc, ...tmpDisplays.slice(di+1)]\n\t\tthis.setState({ displays: newDisplays })\n\t}\n\n\trender() {\n\t\tconst {displays, errorDisplays, activeDisplay, lastDisplay, showInfo, showHelp, aspectRatio, objectFit} = this.state\n\t\tconst size = this.getVideoSize()\n\t\treturn <>\n\t\t\t{showInfo && lastDisplay && <div id=\"info-toggle\">\n\t\t\t\t{aspectRatio.name}<br />\n\t\t\t\tScale strategy: {objectFit}<br />\n\t\t\t\t{lastDisplay.file.name}\n\t\t\t</div>}\n\t\t\t<main ref={this.viewport}\n\t\t\t\tonDrop={e => this.reorderDisplays(e.target)}>\n\t\t\t\t{displays.length == 0 && SPLASH}\n\t\t\t\t{displays.map(i => <BDVideo size={size} objectFit={objectFit} key={i.id} display={i}\n\t\t\t\t\tshowOverlay={i == activeDisplay}\n\t\t\t\t\tplaybackRate={i.playbackRate}\n\t\t\t\t\tonDrag={display => this.setState({dragSrc: display})}\n\t\t\t\t\tonMouseOver={() => this.setState({activeDisplay: i, lastDisplay: i})}\n\t\t\t\t\tonMouseOut={() => this.setState({activeDisplay: undefined})}\n\t\t\t\t\tonLoad={() => i.triggerResize && this.setRecommendedAspectRatio()}\n\t\t\t\t\tonError={() => this.handleVideoError(i)}\n\t\t\t\t\tinTime={i.in} outTime={i.out}\n\t\t\t\t/>)}\n\t\t\t</main>\n\t\t\t{errorDisplays.length > 0 && <section id=\"errors\">\n\t\t\t\t<h2>Errors</h2><ol>\n\t\t\t\t\t{errorDisplays.map((display, i) => <li key={i}>{display.file.name} ({display.file.type})</li>)}\n\t\t\t\t</ol>\n\t\t\t\t<p>Only videos supported by your web browser will play successfully.  <code>.mp4</code> and <code>.webm</code> files are good bets.</p>\n\t\t\t\t<form onSubmit={() => this.setState({errorDisplays: []})}><button>Dismiss</button></form>\n\t\t\t</section>}\n\t\t\t{showHelp && HELP}\n\t\t</>\n\t}\n}\n\nexport default App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}