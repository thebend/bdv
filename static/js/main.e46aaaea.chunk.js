(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(22)},17:function(e,t,n){},18:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),l=n(2),c=n(1),u=n(4);function s(e){(e.requestFullscreen||e.msRequestFullscreen||e.webkitRequestFullscreen).call(e)}var d=document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled,f=(document.exitFullscreen||document.msExitFullscreen||document.webkitExitFullscreen).bind(document);var m=navigator.userAgent.indexOf(" Trident/")>-1?"IE":navigator.userAgent.indexOf(" Edge/")>-1?"Edge":"Chrome",p=["Edge","IE"].indexOf(m)>-1,v={edge:{left:116,right:220,bottom:24},chrome:{left:24,right:24,bottom:16}}["Chrome"===m?"chrome":"edge"],b=function(e){var t=e.src,n=e.offset,a=e.timestamp,i=e.width,o=void 0===i?196:i,l=r.a.useRef(null);return r.a.useEffect(function(){l.current.currentTime=a},[a]),r.a.createElement("video",{className:"thumbnail",ref:l,controls:!1,autoPlay:!1,loop:!1,muted:!0,src:t,width:o,style:{left:n-o/2}})},h=10;function y(e){var t=e.offset,n=e.color,a={bottom:v.bottom+h/2,left:v.left+t-h/2};return r.a.createElement("svg",{className:"iomarker",width:h,height:h,viewBox:"0 0 2 2",style:a},r.a.createElement("circle",{cx:1,cy:1,r:1,fill:n}))}var E=function(e){var t=e.inTime,n=e.outTime,a=e.video;if(!t&&!n)return null;var i=a.duration,o=t||0,l=n||i,c=a.width-v.left-v.right,u=o/i*c,s=l/i*c;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{offset:u,color:"gold"}),r.a.createElement(y,{offset:s,color:"gold"}))},g=(n(17),function(e,t){return t in e&&e[t]()}),w=80,O=v.bottom+8,k=function(){var e=r.a.useState(),t=Object(u.a)(e,2),n=t[0],a=t[1];return[n,r.a.useCallback(function(e){return a(e)},[])]},j=3e3;function C(e){var t=e.showThumbnail,n=e.display,a=e.onLoad,i=e.onError,o=e.onDrag,l=e.size,d=e.onMouseOver,f=e.onMouseOut,h=e.objectFit,y=e.showOverlay,C=e.removeCallback,T=e.copyCallback,x=e.exclusiveCallback,R=e.inCallback,S=e.outCallback,D=e.speedCallback,F=k(),A=Object(u.a)(F,2),I=A[0],P=A[1],M=r.a.useState(),H=Object(u.a)(M,2),L=H[0],W=H[1],U=r.a.useState(),z=Object(u.a)(U,2),N=z[0],K=z[1];r.a.useEffect(function(){I&&(I.ontimeupdate=function(e){var t=n.out&&n.out<I.currentTime,a=n.in&&n.in>I.currentTime;(t||a)&&(I.currentTime=n.in||0)},I.addEventListener("mouseover",function(e){return I.focus()}))},[n.in,n.out,I]);var q=r.a.useCallback(function(e){if(I.height-e.layerY>O)return K(void 0);var t=I.width-v.left-v.right,n=(e.layerX-v.left)/t;if(n<0||n>1)return K(void 0);var a=I.duration*n;K({offset:e.layerX,timestamp:a})},[I]);r.a.useEffect(function(){I&&(I.playbackRate=n.playbackRate)},[n.playbackRate,I]),r.a.useEffect(function(){I&&(I.onmouseover=t&&"IE"!==m?q:null)},[t,q,I]),r.a.useEffect(function(){I&&(n.video=I,n.startTime?I.onload=function(){I.currentTime=n.startTime}:(I.onerror=i,I.onloadeddata=function(e){return I.currentTime=I.duration/2},I.onloadedmetadata=a),I.ondragstart=function(e){e.target.height-e.offsetY<w?e.preventDefault():o(n)},I.onmousemove=function(e){t&&"IE"!==m&&q(e),L&&clearTimeout(L),W(setTimeout(function(){return W(void 0)},j))},I.onmouseout=function(e){K(void 0)})},[n,q,o,i,a,L,t,I]);var V=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=I.duration*e),I.currentTime=(I.currentTime+e+I.duration)%I.duration},X={arrowleft:function(){return V(-.1,!0)},arrowright:function(){return V(.1,!0)},f:function(){return I&&s(I)}},B={m:function(){I.muted=!I.muted},arrowleft:function(){return V(-60)},arrowright:function(){return V(60)}};return r.a.createElement("div",Object.assign({className:"display"},l,{onMouseOver:d,onMouseOut:f,onKeyDown:function(e){return g(e.shiftKey?X:B,e.key.toLowerCase())}}),L&&r.a.createElement("div",{className:"display-border",style:Object(c.a)({},l,{pointerEvents:p?"none":"auto"})},"".concat(n.file.name).concat(1===n.playbackRate?"":" ("+n.playbackRate+"x)")),L&&r.a.createElement("div",{className:"display-controls"},r.a.createElement("button",{onClick:C},"X"),r.a.createElement("button",{onClick:T},"C"),r.a.createElement("button",{onClick:x},"E"),r.a.createElement("button",{onClick:R},"I"),r.a.createElement("button",{onClick:S},"O"),r.a.createElement("button",{onClick:function(){return D(2)}},"\xbb"),r.a.createElement("button",{onClick:function(){return D(.5)}},"\xab")),y&&r.a.createElement(E,{inTime:n.in,outTime:n.out,video:I}),t&&N&&r.a.createElement(b,Object.assign({src:n.url},N)),r.a.createElement("video",Object.assign({controls:!0,autoPlay:!0,loop:!0,muted:!0,ref:P,src:n.url,draggable:!p},l,{style:{objectFit:h}})))}n(18);var T=n(5),x=n(6),R=n.n(x),S=n(3),D=["contain","cover","fill","scale-down"],F=function(e){return Object(c.a)({},e,{id:R()(),startTime:e.video?(e.video.currentTime+60)%e.video.duration:0})},A=function(e,t){return e[(e.indexOf(t)+1)%e.length]},I=function(e,t){return[].concat(Object(l.a)(e.slice(0,t)),Object(l.a)(e.slice(t+1)))},P=function(e){var t=e.state,n=e.setState,a=function(e){n(function(t){var n=t.activeIndex;return void 0===n?t:Object(c.a)({},t,{displays:[].concat(Object(l.a)(t.displays.slice(0,n)),[Object(c.a)({},t.displays[n],e(t.displays[n]))],Object(l.a)(t.displays.slice(n+1)))})})},r=function(e){n(function(t){var n=t.displays.map(function(t){return Object(c.a)({},t,e(t))});return Object(c.a)({},t,n)})};return Object(c.a)({},t,{setPartialState:function(e){n(function(t){return Object(c.a)({},t,e)})},toggleHelp:function(){n(function(e){return Object(c.a)({},e,{showHelp:!e.showHelp})})},toggleThumbnails:function(){n(function(e){return Object(c.a)({},e,{showThumbnails:!e.showThumbnails})})},nextAspect:function(){n(function(e){return Object(c.a)({},e,{aspect:A(S,e.aspect)})})},nextFit:function(){n(function(e){return Object(c.a)({},e,{fit:A([].concat(D),e.fit)})})},setViewport:function(e){n(function(t){return Object(c.a)({},t,{viewport:e})})},setExclusive:function(e){n(function(t){return Object(c.a)({},t,{activeIndex:0,displays:[t.displays[e]]})})},removeActive:function(){n(function(e){return void 0===e.activeIndex?e:Object(c.a)({},e,{displays:I(e.displays,e.activeIndex),activeIndex:void 0})})},copyDisplay:function(e){n(function(t){return Object(c.a)({},t,{displays:[].concat(Object(l.a)(t.displays),[F(t.displays[e])])})})},addCopies:function(e){n(function(t){var n=t.activeIndex;return void 0===n?t:Object(c.a)({},t,{displays:[].concat(Object(l.a)(t.displays),Object(l.a)(Object(l.a)(Array(e)).map(function(){return F(t.displays[n])})))})})},updateDisplay:function(e,t){n(function(n){var a=Object(l.a)(n.displays);return a[e]=Object(c.a)({},a[e],t),Object(c.a)({},n,{displays:a})})},applyToActive:a,applyToAll:r,setActiveIO:function(e){a(function(t){return Object(T.a)({},e,void 0===t[e]?t.video.currentTime:void 0)})},adjustActivePlaybackRate:function(e){a(function(t){return{playbackRate:t.playbackRate*e}})},syncPlaybackRates:function(e){r(function(t){return{playbackRate:e}})},addFiles:function(e){n(function(t){var n=e.map(function(e){return{id:R()(),file:e,url:URL.createObjectURL(e),triggerResize:t.firstLoad,playbackRate:1}});return Object(c.a)({},t,{firstLoad:!1,showHelp:t.showHelp&&0===n.length,displays:[].concat(Object(l.a)(t.displays),Object(l.a)(n))})})},handleDisplayError:function(){n(function(e){var t=e.activeIndex;return void 0===t?e:Object(c.a)({},e,{displays:I(e.displays,t),errorDisplays:[].concat(Object(l.a)(e.errorDisplays),[e.displays[t]])})})},dismissErrors:function(){n(function(e){return Object(c.a)({},e,{errorDisplays:[]})})},distributeTimes:function(e){n(function(t){var n=t.displays[e],a=n.video,r=n.file;if(!a)return t;var i=t.displays.filter(function(e){return e.file===r}),o=[n].concat(Object(l.a)(i.slice(e+1)),Object(l.a)(i.slice(0,e))),c=a.currentTime,u=a.duration,s=u/o.length;return o.forEach(function(e,t){var n=c+s*t;e.video.currentTime=n%u}),t})},reorderDisplays:function(e){n(function(t){var n=t.dragSrc;if(void 0===n)return t;var a=t.displays,r=a.indexOf(n),i=a.findIndex(function(t){return t.video===e})||a.length-1,o=r>i?[].concat(Object(l.a)(a.slice(0,i)),[a[r]],Object(l.a)(a.slice(i,r)),Object(l.a)(a.slice(r+1))):[].concat(Object(l.a)(a.slice(0,r)),Object(l.a)(a.slice(r+1,i+1)),[a[r]],Object(l.a)(a.slice(i+1)));return Object(c.a)({},t,{displays:o})})}})},M=r.a.createElement("section",{id:"shortcuts"},r.a.createElement("h2",null,"Shortcuts"),r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement("em",null,"C:")," Clone video (+1m)"),r.a.createElement("li",null,r.a.createElement("em",null,"D:")," Distribute times"),r.a.createElement("li",null,r.a.createElement("em",null,"E:")," Remove everything else"),r.a.createElement("li",null,r.a.createElement("em",null,"F:")," Toggle fullscreen"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift+F:")," Fullscreen video"),r.a.createElement("li",null,r.a.createElement("em",null,"H:")," Toggle help"),r.a.createElement("li",null,r.a.createElement("em",null,"I:")," Toggle in point"),r.a.createElement("li",null,r.a.createElement("em",null,"O:")," Toggle out point"),r.a.createElement("li",null,r.a.createElement("em",null,"M:")," Toggle mute"),r.a.createElement("li",null,r.a.createElement("em",null,"R:")," Remove video"),r.a.createElement("li",null,r.a.createElement("em",null,"S:")," Change video scaling"),r.a.createElement("li",null,r.a.createElement("em",null,"X:")," Change aspect ratio"),r.a.createElement("li",null,r.a.createElement("em",null,"\u2190 \u2192:")," Skip 1m"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift \u2190 \u2192:")," Skip 10%"),r.a.createElement("li",null,r.a.createElement("em",null,"Ctrl \u2190 \u2192:")," Change speed"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift+S")," Sync speeds"),r.a.createElement("li",null,r.a.createElement("em",null,"Ctrl+W:")," Close tab"),r.a.createElement("li",null,r.a.createElement("em",null,"O,O:")," Restart video"),r.a.createElement("li",null,r.a.createElement("em",null,"2-9:")," Fill 2-9 size grid"),r.a.createElement("li",null,r.a.createElement("em",null,"Drag+Drop:")," Reorder videos"))),H=r.a.createElement("footer",null,r.a.createElement("h2",null,"Privacy Disclaimer"),r.a.createElement("p",null,"This tool records ",r.a.createElement("b",null,"no")," filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded."));function L(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:e.name},e.label),r.a.createElement("select",{name:e.name,value:e.value,onChange:function(t){return e.callback(t.target.value)}},e.choices))}var W=function(e){return r.a.createElement("section",{id:"help"},r.a.createElement("h2",null,"Usage"),r.a.createElement("p",null,"Drag and drop any number of videos to auto-play in an optimally arranged grid."),r.a.createElement("section",{id:"settings"},r.a.createElement("h2",null,"Settings"),r.a.createElement("form",null,r.a.createElement(L,{name:"objectScale",label:"Video Fit/Fill",value:e.objectFit,choices:D.map(function(e){return r.a.createElement("option",{key:e,value:e},e[0].toUpperCase()+e.substr(1))}),callback:function(t){return e.objectFitCallback(t)}}),r.a.createElement("br",null),r.a.createElement(L,{name:"aspectRatio",label:"Aspect Ratio",value:S.indexOf(e.aspectRatio).toString(),choices:S.map(function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)}),callback:function(t){return e.aspectRatioCallback(S[parseInt(t)])}}),r.a.createElement("br",null))),M,H)};function U(e){var t=e.errorDisplays,n=e.dismissCallback;return r.a.createElement("section",{id:"errors"},r.a.createElement("h2",null,"Errors"),r.a.createElement("ol",null,t.map(function(e,t){return r.a.createElement("li",{key:t},e.file.name," (",e.file.type,")")})),r.a.createElement("p",null,"Only videos supported by your web browser will play successfully.  ",r.a.createElement("code",null,".mp4")," and ",r.a.createElement("code",null,".webm")," files are good bets."),r.a.createElement("form",{onSubmit:n},r.a.createElement("button",null,"Dismiss")))}function z(){return r.a.createElement("section",{id:"splash"},r.a.createElement("p",null,"Auto-play any number of videos or copies of videos in an optimally arranged grid with simple drag-and-drop.  Videos start half-way in and loop, ensuring immediate, continuous immersion, great for scouring surveillance footage, finding the best highlights from your last gaming stream, and more!"),r.a.createElement("p",null,"Find your favourite moments quickly with thumbnail scrubbing and keyboard shortcuts to jump ahead in time 1m (\u2192) or 10% (Shift \u2192), or adjust playback speed (Ctrl \u2192)."),r.a.createElement("p",null,"Use shortcut keys to rapidly (c)opy or (r)emove displays, set (i)n/(o)ut loop points, (f)ullscreen the display, toggle (m)ute, etc."))}n(21);var N=function(e,t){var n=Object(a.useState)(t),r=Object(u.a)(n,2),i=r[0],o=r[1];return Object(a.useMemo)(function(){return e({state:i,setState:o})},[i,e])};var K=function(e){return e.reduce(function(e,t){return e+t},0)/e.length};function q(e){e.preventDefault(),e.stopPropagation()}function V(e,t){t in e&&e[t]()}var X=function(){var e=N(P,{showHelp:!0,showThumbnails:!0,firstLoad:!0,displays:[],errorDisplays:[],aspect:S[0],fit:D[0]}),t=r.a.useRef(null),n={f:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;d&&(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement?f():s(e))}()},h:e.toggleHelp,s:e.nextFit,t:e.toggleThumbnails,x:e.nextAspect},a=function(){var n=t.current;e.setViewport({width:n.clientWidth,height:n.clientHeight})};r.a.useLayoutEffect(function(){window.onresize=function(){return a()},a()},[]),r.a.useEffect(function(){document.ondragover=q,document.ondragenter=q,document.ondragleave=q},[]),r.a.useEffect(function(){window.onkeydown=function(t){var a=t.key.toLowerCase();if(a in n&&!t.shiftKey&&!t.ctrlKey)return n[a]();var r=e.activeIndex;if(void 0!==r){var i={arrowleft:function(){return e.adjustActivePlaybackRate(.5)},arrowright:function(){return e.adjustActivePlaybackRate(2)}},o={s:function(){return e.syncPlaybackRates(e.displays[r].video.playbackRate)}},l={delete:e.removeActive,c:function(){return e.copyDisplay(r)},d:function(){return e.distributeTimes(r)},e:function(){return e.activeIndex&&e.setExclusive(e.activeIndex)},i:function(){return e.setActiveIO("in")},o:function(){return e.setActiveIO("out")},r:e.removeActive};t.shiftKey?V(o,a):t.ctrlKey?V(i,a):(V(l,a),a>="2"&&a<="9"&&(e.addCopies(parseInt(a)),e.distributeTimes(r)))}}},[e,n]),r.a.useEffect(function(){document.ondrop=function(t){if(q(t),t.dataTransfer){var n=t.dataTransfer.files;e.addFiles(Array.from(n))}}},[e]);var i=r.a.useCallback(function(){var t=K(e.displays.map(function(e){return e.video.videoWidth/e.video.videoHeight}));return Object(l.a)(S).sort(function(e,n){return Math.abs(t-n.ratio)-Math.abs(t-e.ratio)}).pop()},[e.displays]),o=r.a.useMemo(function(){return function(e,t,n){for(var a=0,r=0,i=0,o=1;o<=t;o++){var l=Math.ceil(t/o),c=Math.floor(n.width/l),u=Math.floor(n.height/o),s=c,d=u;e>c/u?d=s/e:s=d*e;var f=s*d;f<a||(a=f,r=c,i=u)}return{width:r,height:i}}(e.aspect.ratio,e.displays.length,e.viewport||{width:1,height:1})},[e.aspect,e.displays,e.viewport]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{ref:t,onDrop:function(t){return e.reorderDisplays(t.target)}},0===e.displays.length&&r.a.createElement(z,null),e.displays.map(function(t,n){return r.a.createElement(C,{size:o,objectFit:e.fit,key:t.id,display:t,showOverlay:e.activeIndex===n,showThumbnail:e.showThumbnails,onDrag:function(n){return e.setPartialState({dragSrc:t})},onMouseOver:function(){return e.setPartialState({activeIndex:n})},onMouseOut:function(){return e.setPartialState({activeIndex:void 0})},onLoad:function(){return t.triggerResize&&e.setPartialState({aspect:i()})},onError:function(){return e.handleDisplayError()},removeCallback:e.removeActive,copyCallback:function(){return e.copyDisplay(n)},exclusiveCallback:function(){return e.setExclusive(n)},staggerCallback:function(){return e.distributeTimes(n)},inCallback:function(){return e.setActiveIO("in")},outCallback:function(){return e.setActiveIO("out")},speedCallback:function(t){return e.adjustActivePlaybackRate(t)}})})),e.errorDisplays.length>0&&r.a.createElement(U,{errorDisplays:e.errorDisplays,dismissCallback:e.dismissErrors}),e.showHelp&&r.a.createElement(W,{aspectRatio:e.aspect,objectFit:e.fit,aspectRatioCallback:function(t){return e.setPartialState({aspect:t})},objectFitCallback:function(t){return e.setPartialState({fit:t})}}))},B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(X,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");B?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):J(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):J(t,e)})}}()},3:function(e){e.exports=[{ratio:1.7777777777777777,name:"16:9 (High Def)"},{ratio:1.3333333333333333,name:"4:3 (Standard Def)"},{ratio:1,name:"1:1 (Square)"},{ratio:.5625,name:"9:16 (Vertical HD)"},{ratio:1.85,name:"1.85:1 (Cinematic)"},{ratio:2.35,name:"2.35:1 (Anamorphic)"}]}},[[11,1,2]]]);
//# sourceMappingURL=main.e46aaaea.chunk.js.map