{"version":3,"sources":["FullScreen.ts","browser.ts","Thumbnail.tsx","components/IOMarker.tsx","IOBar.tsx","BDVideo.tsx","AppReducer.ts","components/Help.tsx","components/ErrorDisplay.tsx","components/Splash.tsx","App.tsx","getVideoSize.ts","serviceWorker.js","index.js"],"names":["fullscreenElement","element","requestFullscreen","msRequestFullscreen","webkitRequestFullscreen","call","fsEnabled","document","fullscreenEnabled","msFullscreenEnabled","webkitFullscreenEnabled","fsExit","exitFullscreen","msExitFullscreen","webkitExitFullscreen","bind","browser","navigator","userAgent","indexOf","msBrowser","margins","edge","left","right","bottom","chrome","Thumbnail","_ref","src","offset","timestamp","_ref$width","width","video","React","useRef","useEffect","current","currentTime","react_default","a","createElement","className","ref","controls","autoPlay","loop","muted","style","diameter","IOMarker","color","height","viewBox","cx","cy","r","fill","IOBar","inTime","outTime","duration","ip","op","timelineWidth","ix","ox","Fragment","tryActions","actions","key","dragMargin","thumbnailMargin","useElement","_React$useState","useState","_React$useState2","Object","slicedToArray","setElement","useCallback","i","overlayDuration","BDVideo","showThumbnail","display","onLoad","onError","onDrag","size","onMouseOver","onMouseOut","objectFit","showOverlay","removeCallback","copyCallback","exclusiveCallback","inCallback","outCallback","speedCallback","_useElement","_useElement2","v","videoRef","_React$useState3","_React$useState4","overlayTimeout","setOverlayTimeout","_React$useState5","_React$useState6","thumbnailState","setThumbnailState","ontimeupdate","e","pastOut","out","beforeIn","in","addEventListener","focus","hoverThumbnail","layerY","undefined","videoPercentage","layerX","targetTime","playbackRate","onmouseover","startTime","onload","onerror","onloadeddata","onloadedmetadata","ondragstart","target","offsetY","preventDefault","onmousemove","clearTimeout","setTimeout","onmouseout","adjustDisplayTime","adjustment","arguments","length","shiftDisplayActions","arrowleft","arrowright","f","displayActions","m","assign","onKeyDown","ev","shiftKey","toLowerCase","objectSpread","pointerEvents","concat","file","name","onClick","IOBar_IOBar","Thumbnail_Thumbnail","url","draggable","objectFits","getDisplayCopy","id","uuid","getNext","list","removeIndex","toConsumableArray","slice","AppReducer","state","action","applyToActive","modifier","activeIndex","d","displays","applyToAll","map","type","aspect","aspectRatios","fit","payload","showHelp","showThumbnails","body","msFullscreenElement","webkitFullscreenElement","toggleFullscreen","dragSrc","si","di","findIndex","Array","_action$payload","index","updates","marker","defineProperty","newDisplays","URL","createObjectURL","firstLoad","errorDisplays","matchingDisplays","filter","orderedDisplays","t1","spacing","forEach","SHORTCUTS","DISCLAIMER","SelectInput","props","htmlFor","label","value","onChange","callback","choices","Help","toUpperCase","substr","objectFitCallback","AspectRatios","aspectRatio","toString","aspectRatioCallback","parseInt","ErrorDisplay","dismissCallback","onSubmit","Splash","avg","arr","reduce","b","stopEvent","stopPropagation","App","_React$useReducer","useReducer","_React$useReducer2","dispatch","viewport","globalActions","h","s","t","x","useLayoutEffect","handleResize","clientWidth","clientHeight","window","onresize","ondragover","ondragenter","ondragleave","onkeydown","ctrlKey","ctrlDisplayActions","delete","c","o","ondrop","dataTransfer","droppedFiles","files","from","getRecommendedAspect","avgRatio","videoWidth","videoHeight","sort","Math","abs","ratio","pop","useMemo","objects","constraints","bestArea","rows","cols","ceil","floor","y","vx","vy","videoArea","getVideoSize","onDrop","BDVideo_BDVideo","staggerCallback","components_Help","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","src_App","getElementById","process","href","origin","fetch","response","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.158281c1.chunk.js","sourcesContent":["export function fullscreenElement(element:HTMLElement) {\r\n\t(element.requestFullscreen || (element as any).msRequestFullscreen || (element as any).webkitRequestFullscreen).call(element)\r\n}\r\n\r\nconst fsEnabled = document.fullscreenEnabled || (document as any).msFullscreenEnabled || (document as any).webkitFullscreenEnabled\r\nconst fsExit = (document.exitFullscreen || (document as any).msExitFullscreen || (document as any).webkitExitFullscreen).bind(document)\r\nexport function toggleFullscreen(target:HTMLElement = document.body) {\r\n\tif (!fsEnabled) return\r\n\tconst fsElement = document.fullscreenElement || (document as any).msFullscreenElement || (document as any).webkitFullscreenElement\r\n\tif (fsElement) {\r\n\t\tfsExit()\r\n\t} else {\r\n\t\tfullscreenElement(target)\r\n\t}\r\n}\r\n","function getBrowser() {\r\n\tif (navigator.userAgent.indexOf(' Trident/') > -1) return 'IE'\r\n\tif (navigator.userAgent.indexOf(' Edge/') > -1) return 'Edge'\r\n\treturn 'Chrome'\r\n}\r\n\r\nconst videoMargins = {\r\n\t\"edge\": {\r\n\t\t\"left\": 116,\r\n\t\t\"right\": 220,\r\n\t\t\"bottom\": 24\r\n\t},\r\n\t\"chrome\": {\r\n\t\t\"left\": 24,\r\n\t\t\"right\": 24,\r\n\t\t\"bottom\": 16\r\n\t}\r\n}\r\n\r\n\r\nexport const browser = getBrowser()\r\nexport const msBrowser = [\"Edge\",\"IE\"].indexOf(browser) > -1\r\nexport const margins = videoMargins[browser === \"Chrome\" ? 'chrome' : 'edge']","import React from 'react'\r\nconst thumbnailWidth = 196\r\n\r\ntype ThumbnailProps = {\r\n\tsrc:string\r\n\toffset:number\r\n\ttimestamp:number\r\n\twidth?:number\r\n}\r\n\r\nexport const Thumbnail = ({src, offset, timestamp, width=thumbnailWidth}:ThumbnailProps) => {\r\n\tconst video = React.useRef<HTMLVideoElement>(null)\r\n\tReact.useEffect(() => {\r\n\t\tvideo.current!.currentTime = timestamp\r\n\t}, [timestamp])\r\n\r\n\treturn <video className=\"thumbnail\"\r\n\t\tref={video}\r\n\t\tcontrols={false} autoPlay={false} loop={false} muted={true}\r\n\t\tsrc={src} width={width} style={{left: offset - (width / 2)}} />\r\n}\r\n","import React from 'react'\r\nimport { margins } from '../browser'\r\n\r\ntype IOMarkerProps = {\r\n\toffset:number\r\n\tcolor:string\r\n}\r\n\r\nconst diameter = 10\r\nexport function IOMarker({offset, color}:IOMarkerProps) {\r\n\tconst style = {\r\n\t\tbottom: margins.bottom + (diameter/2),\r\n\t\tleft: margins.left + offset - (diameter/2)\r\n\t}\r\n\treturn <svg className=\"iomarker\"\r\n\t\twidth={diameter} height={diameter}\r\n\t\tviewBox={`0 0 2 2`} style={style}>\r\n\t\t<circle cx={1} cy={1} r={1} fill={color} />\r\n\t</svg>\r\n}","import React from 'react'\r\nimport { IOMarker } from './components/IOMarker'\r\nimport { margins } from './browser'\r\n\r\ntype IOBarProps = {\r\n\tinTime?:number\r\n\toutTime?:number\r\n\tvideo:HTMLVideoElement\r\n}\r\n\r\nexport const IOBar = ({inTime, outTime, video}:IOBarProps) => {\r\n\tif (!(inTime || outTime)) return null\r\n\tconst duration = video.duration\r\n\tconst ip = inTime || 0\r\n\tconst op = outTime || duration\r\n\tconst timelineWidth = video.width - margins.left - margins.right\r\n\tconst ix = (ip / duration) * timelineWidth\r\n\tconst ox = (op / duration) * timelineWidth\r\n\treturn <>\r\n\t\t<IOMarker offset={ix} color=\"gold\" />\r\n\t\t<IOMarker offset={ox} color=\"gold\" />\r\n\t</>\r\n}","import React from 'react'\r\nimport { ObjectFitProperty } from 'csstype'\r\nimport { fullscreenElement } from './FullScreen'\r\nimport { margins, browser, msBrowser } from './browser'\r\nimport { Thumbnail } from './Thumbnail'\r\nimport { IOBar } from './IOBar'\r\nimport './BDVideo.css'\r\n\r\nexport type Display = {\r\n\tid:string\r\n\tfile:File\r\n\turl:string\r\n\tstartTime?:number\r\n\tin?:number\r\n\tout?:number\r\n\tvideo?:HTMLVideoElement\r\n\t// triggerResize:boolean\r\n\tplaybackRate:number\r\n}\r\n\r\ntype BDVideoProps = {\r\n\tdisplay:Display\r\n\tobjectFit:ObjectFitProperty\r\n\tsize: {\r\n\t\twidth:number\r\n\t\theight:number\r\n\t}\r\n\tshowOverlay:boolean\r\n\tshowThumbnail:boolean\r\n\tonMouseOver:()=>void\r\n\tonMouseOut:()=>void\r\n\tonLoad:()=>void\r\n\tonError:()=>void\r\n\tonDrag:(display:Display)=>void\r\n\tremoveCallback:()=>void,\r\n\tcopyCallback:()=>void,\r\n\texclusiveCallback:()=>void,\r\n\tstaggerCallback:()=>void,\r\n\tinCallback:()=>void,\r\n\toutCallback:()=>void,\r\n\tspeedCallback:(adjustment:number)=>void\r\n}\r\n\r\nconst tryActions = (actions:{[key:string]:()=>void}, key:string) =>\r\n\tkey in actions && actions[key]()\r\n\r\ntype ThumbnailState = {\r\n\toffset:number // x-axis mouse position\r\n\ttimestamp:number\r\n}\r\n\r\nconst dragMargin = 80\r\nconst thumbnailMargin = margins.bottom + 8\r\n\r\nconst useElement = <T,>() => {\r\n\tconst [element, setElement] = React.useState<T>()\r\n\tconst ref = React.useCallback((i:T)=>setElement(i), [])\r\n\treturn [element!, ref] as const\r\n}\r\n\r\nconst overlayDuration = 3000\r\nexport function BDVideo({showThumbnail, display,\r\n\tonLoad, onError, onDrag, size, onMouseOver, onMouseOut,\r\n\tobjectFit, showOverlay, removeCallback, copyCallback, exclusiveCallback,\r\n\tinCallback, outCallback, speedCallback}:BDVideoProps) {\r\n\r\n\tconst [v, videoRef] = useElement<HTMLVideoElement>()\r\n\r\n\tconst [overlayTimeout, setOverlayTimeout] = React.useState<NodeJS.Timeout|undefined>()\r\n\tconst [thumbnailState, setThumbnailState] = React.useState<ThumbnailState|undefined>()\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!v) return\r\n\t\tv.ontimeupdate = e => {\r\n\t\t\tconst pastOut = display.out && display.out< v.currentTime\r\n\t\t\tconst beforeIn = display.in && display.in > v.currentTime\r\n\t\t\tif (pastOut || beforeIn) v.currentTime = display.in || 0\r\n\t\t}\r\n\t\tv.addEventListener('mouseover', e=>v.focus())\r\n\t}, [display.in, display.out, v])\r\n\r\n\tconst hoverThumbnail = React.useCallback((e:MouseEvent) => {\r\n\t\tconst distanceFromBottom = v.height - e.layerY\r\n\t\tif (distanceFromBottom > thumbnailMargin) {\r\n\t\t\treturn setThumbnailState(undefined)\r\n\t\t}\r\n\t\tconst timelineWidth = v.width - margins.left - margins.right\r\n\t\tconst videoPercentage = (e.layerX - margins.left) / timelineWidth \r\n\t\tif (videoPercentage < 0 || videoPercentage > 1) {\r\n\t\t\treturn setThumbnailState(undefined)\r\n\t\t}\r\n\t\tconst targetTime = v.duration * videoPercentage\r\n\t\tsetThumbnailState({\r\n\t\t\toffset: e.layerX,\r\n\t\t\ttimestamp: targetTime\r\n\t\t})\r\n\t}, [v])\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!v) return\r\n\t\tv.playbackRate = display.playbackRate\r\n\t}, [display.playbackRate, v])\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!v) return\r\n\t\tv.onmouseover = showThumbnail && browser !== 'IE' ? hoverThumbnail : null\r\n\t}, [showThumbnail, hoverThumbnail, v])\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!v) return\r\n\t\tdisplay.video = v\r\n\t\tif (display.startTime) {\r\n\t\t\tv.onload = () => { v.currentTime = display.startTime! }\r\n\t\t} else {\r\n\t\t\tv.onerror = onError\r\n\t\t\tv.onloadeddata = e => v.currentTime = v.duration / 2\r\n\t\t\tv.onloadedmetadata = onLoad\r\n\t\t}\r\n\t\tv.ondragstart = e => {\r\n\t\t\tconst target = e.target! as HTMLVideoElement\r\n\t\t\tconst distanceFromBottom = target.height - e.offsetY\r\n\t\t\tif (distanceFromBottom < dragMargin) {\r\n\t\t\t\te.preventDefault()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tonDrag(display)\r\n\t\t}\r\n\t\tv.onmousemove = e => {\r\n\t\t\tshowThumbnail && browser !== 'IE' && hoverThumbnail(e)\r\n\t\t\toverlayTimeout && clearTimeout(overlayTimeout)\r\n\t\t\tsetOverlayTimeout(setTimeout(()=>setOverlayTimeout(undefined), overlayDuration))\r\n\t\t}\r\n\t\tv.onmouseout = e => {\r\n\t\t\tsetThumbnailState(undefined)\r\n\t\t}\r\n\t}, [display, hoverThumbnail, onDrag, onError, onLoad, overlayTimeout, showThumbnail, v])\r\n\r\n\tconst adjustDisplayTime = (adjustment:number, percentage:boolean = false) => {\r\n\t\tif (percentage) adjustment = v.duration * adjustment\r\n\t\tv.currentTime = (v.currentTime + adjustment + v.duration) % v.duration\r\n\t}\r\n\r\n\tconst shiftDisplayActions = {\r\n\t\t\"arrowleft\": () => adjustDisplayTime(-.1, true),\r\n\t\t\"arrowright\": () => adjustDisplayTime(.1, true),\r\n\t\t\"f\": () => v && fullscreenElement(v)\r\n\t}\r\n\tconst displayActions = {\r\n\t\t\"m\": () => { v.muted = !v.muted },\r\n\t\t\"arrowleft\": () => adjustDisplayTime(-60),\r\n\t\t\"arrowright\": () => adjustDisplayTime(60),\r\n\t}\r\n\r\n\tconst handleDisplayKeyDown = (ev:React.KeyboardEvent<HTMLDivElement>) =>\r\n\t\ttryActions(\r\n\t\t\tev.shiftKey ? shiftDisplayActions : displayActions,\r\n\t\t\tev.key.toLowerCase()\r\n\t\t)\r\n\r\n\treturn <div className=\"display\" {...size} onMouseOver={onMouseOver} onMouseOut={onMouseOut} onKeyDown={handleDisplayKeyDown}>\r\n\t\t{overlayTimeout && <div className=\"display-border\" style={{...size, pointerEvents: msBrowser ? 'none' : 'auto'}}>\r\n\t\t\t{`${display.file.name}${display.playbackRate === 1 ? \"\" : \" (\"+display.playbackRate+\"x)\"}`}\r\n\t\t</div>}\r\n\t\t{overlayTimeout && <div className=\"display-controls\">\r\n\t\t\t<button onClick={removeCallback}>X</button>\r\n\t\t\t<button onClick={copyCallback}>C</button>\r\n\t\t\t<button onClick={exclusiveCallback}>E</button>\r\n\t\t\t<button onClick={inCallback}>I</button>\r\n\t\t\t<button onClick={outCallback}>O</button>\r\n\t\t\t<button onClick={() => speedCallback(2)}>&raquo;</button>\r\n\t\t\t<button onClick={() => speedCallback(0.5)}>&laquo;</button>\r\n\t\t</div>}\r\n\t\t{showOverlay && <IOBar inTime={display.in} outTime={display.out} video={v} />}\r\n\t\t{showThumbnail && thumbnailState && <Thumbnail src={display.url} {...thumbnailState} />}\r\n\t\t<video controls={true} autoPlay={true} loop={true} muted={true} ref={videoRef}\r\n\t\t\tsrc={display.url} draggable={!msBrowser} {...size} style={{objectFit}} />\r\n\t</div>\r\n}","import uuid from 'uuid'\r\nimport {ObjectFitProperty} from 'csstype'\r\nimport { Display } from './BDVideo'\r\nimport { toggleFullscreen } from './FullScreen'\r\nimport aspectRatios from './AspectRatios.json'\r\n\r\nexport const objectFits:ObjectFitProperty[] = ['contain', 'cover', 'fill', 'scale-down']\r\nexport type AspectRatio = typeof aspectRatios[number]\r\n\r\nconst getDisplayCopy = (display:Display) => ({\r\n\t...display,\r\n\tid: uuid(),\r\n\tstartTime: display.video ? (display.video.currentTime + 60) % display.video.duration : 0\r\n})\r\n\r\nconst getNext = <T,>(list:T[], current:T) =>\r\n\tlist[(list.indexOf(current) + 1) % list.length]\r\n\r\nconst removeIndex = <T,>(list:T[], i:number) =>\r\n\t[...list.slice(0,i), ...list.slice(i+1)]\r\n\r\ntype Viewport = {\r\n\twidth:number\r\n\theight:number\r\n}\r\n\r\ntype AppState = {\r\n\tshowHelp:boolean\r\n\tshowThumbnails:boolean\r\n\tfirstLoad:boolean\r\n\r\n\tfit:ObjectFitProperty\r\n\taspect:AspectRatio\r\n\r\n\tactiveIndex?:number\r\n\tdragSrc?:Display\r\n\r\n\tdisplays:Display[]\r\n\terrorDisplays:Display[]\r\n\r\n\tviewport?:Viewport\r\n}\r\n\r\nexport type AppAction =\r\n| { type: 'nextAspect' }\r\n| { type: 'nextFit' }\r\n| { type: 'setExclusive', payload:number }\r\n| { type: 'toggleHelp' }\r\n| { type: 'toggleThumbnails' }\r\n| { type: 'toggleFullscreen' }\r\n| { type: 'setPartialState', payload:Partial<AppState> }\r\n| { type: 'removeActive' }\r\n| { type: 'copyDisplay', payload:number }\r\n| { type: 'reorderDisplays', payload:EventTarget }\r\n| { type: 'addCopies', payload:number }\r\n| { type: 'updateDisplay', payload: {index:number, updates:Partial<Display>} }\r\n| { type: 'applyToActive', payload:(display:Display)=>Partial<Display> }\r\n| { type: 'applyToAll', payload:(display:Display)=>Partial<Display> }\r\n| { type: 'addFiles', payload:File[] }\r\n| { type: 'handleDisplayError', payload:number }\r\n| { type: 'dismissErrors' }\r\n| { type: 'distributeTimes' }\r\n| { type: 'setActiveIO', payload:'in'|'out' }\r\n| { type: 'adjustActivePlaybackRate', payload:number }\r\n| { type: 'syncPlaybackRates', payload:number }\r\n\r\nexport const AppReducer = (state:AppState, action:AppAction):AppState => {\r\n\tconst applyToActive = (modifier:(display:Display)=>Partial<Display>) => {\r\n\t\tconst i = state.activeIndex\r\n\t\tif (i === undefined) return state\r\n\t\tconst d = state.displays\r\n\t\tconst displays = [\r\n\t\t\t...d.slice(0, i),\r\n\t\t\t{...d[i], ...modifier(d[i])},\r\n\t\t\t...d.slice(i+1)\r\n\t\t]\r\n\t\treturn { ...state, displays }\r\n\t}\r\n\r\n\tconst applyToAll = (modifier:(display:Display)=>Partial<Display>) => {\r\n\t\tconst displays = state.displays.map(i=>({...i, ...modifier(i)}))\r\n\t\treturn { ...state, ...displays}\r\n\t}\r\n\r\nswitch (action.type) {\r\n\tcase 'nextAspect':\r\n\t\treturn {...state, aspect: getNext(aspectRatios, state.aspect)}\r\n\tcase 'nextFit':\r\n\t\treturn {...state, fit: getNext(objectFits, state.fit)}\r\n\tcase 'setExclusive':\r\n\t\treturn {...state, activeIndex: 0, displays: [state.displays[action.payload]]}\r\n\tcase 'toggleHelp':\r\n\t\treturn {...state, showHelp: !state.showHelp}\r\n\tcase 'toggleThumbnails':\r\n\t\treturn {...state, showThumbnails: !state.showThumbnails}\r\n\tcase 'setPartialState':\r\n\t\treturn {...state, ...action.payload}\r\n\tcase 'toggleFullscreen':\r\n\t\ttoggleFullscreen()\r\n\t\treturn state\r\n\tcase 'removeActive':\r\n\t\tif (state.activeIndex === undefined) return state\r\n\t\treturn {...state, displays: removeIndex(state.displays, state.activeIndex)}\r\n\tcase 'copyDisplay': {\r\n\t\tconst displays = [\r\n\t\t\t...state.displays,\r\n\t\t\tgetDisplayCopy(state.displays[action.payload])\r\n\t\t]\r\n\t\treturn { ...state, displays }\r\n\t}\r\n\tcase 'reorderDisplays': {\r\n\t\tconst src = state.dragSrc\r\n\t\tif (src === undefined) return state\r\n\t\tconst d = state.displays\r\n\t\tconst si = d.indexOf(src)\r\n\t\tconst di = d.findIndex(i => i.video === action.payload) || d.length - 1\r\n\t\tconst displays = si > di ? [\r\n\t\t\t...d.slice(0, di),\r\n\t\t\td[si],\r\n\t\t\t...d.slice(di, si),\r\n\t\t\t...d.slice(si+1)\r\n\t\t] : [\r\n\t\t\t...d.slice(0, si),\r\n\t\t\t...d.slice(si+1, di+1),\r\n\t\t\td[si],\r\n\t\t\t...d.slice(di+1)\r\n\t\t]\r\n\t\treturn { ...state, displays }\r\n\t}\r\n\tcase 'addCopies': {\r\n\t\tconst i = state.activeIndex\r\n\t\tif (i === undefined) return state\r\n\t\tconst displays = [\r\n\t\t\t...state.displays,\r\n\t\t\t...[...Array(action.payload)].map(()=>getDisplayCopy(state.displays[i]))\r\n\t\t]\r\n\t\treturn { ...state, displays }\r\n\t}\r\n\tcase 'updateDisplay': {\r\n\t\tconst displays = [...state.displays]\r\n\t\tconst {index, updates} = action.payload\r\n\t\tdisplays[index] = { ...displays[index], ...updates }\r\n\t\treturn { ...state, displays }\r\n\t}\r\n\t// lots of issues because active is an object, not the object in question\r\n\tcase 'applyToActive':\r\n\t\treturn applyToActive(action.payload)\r\n\tcase 'applyToAll':\r\n\t\treturn applyToAll(action.payload)\r\n\tcase 'setActiveIO': {\r\n\t\tconst marker = action.payload\r\n\t\treturn applyToActive(display => ({\r\n\t\t\t[marker]: display[marker] === undefined\r\n\t\t\t\t? display.video!.currentTime\r\n\t\t\t\t: undefined\r\n\t\t}))\r\n\t}\r\n\tcase 'addFiles': {\r\n\t\tconst newDisplays = action.payload.map(file => ({\r\n\t\t\tid: uuid(),\r\n\t\t\tfile,\r\n\t\t\turl: URL.createObjectURL(file),\r\n\t\t\t// triggerResize: state.firstLoad,\r\n\t\t\tplaybackRate: 1\r\n\t\t}))\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tfirstLoad: false,\r\n\t\t\tshowHelp: state.showHelp && newDisplays.length === 0,\r\n\t\t\tdisplays: [...state.displays, ...newDisplays]\r\n\t\t}\r\n\t}\r\n\tcase 'handleDisplayError': {\r\n\t\tconst i = action.payload\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\terrorDisplays: [...state.errorDisplays, state.displays[i]],\r\n\t\t\tdisplays: removeIndex(state.displays, i)\r\n\t\t}\r\n\t}\r\n\tcase 'dismissErrors':\r\n\t\treturn { ...state, errorDisplays: [] }\r\n\tcase 'distributeTimes': {\r\n\t\tconst i = state.activeIndex\r\n\t\tif (i === undefined) return state\r\n\t\tconst display = state.displays[i]\r\n\t\tconst {video, file} = display\r\n\t\tif (!video) return state\r\n\r\n\t\tconst matchingDisplays = state.displays.filter(i => i.file === file)\r\n\t\t// start with target display so it keeps its current time, bump up from there looping back to start\r\n\t\tconst orderedDisplays = [\r\n\t\t\tdisplay,\r\n\t\t\t...matchingDisplays.slice(i+1),\r\n\t\t\t...matchingDisplays.slice(0, i)\r\n\t\t]\r\n\r\n\t\tconst t1 = video.currentTime\r\n\t\tconst duration = video.duration\r\n\t\tconst spacing = duration / orderedDisplays.length\r\n\r\n\t\torderedDisplays.forEach((v, i) => {\r\n\t\t\tconst targetTime = t1 + (spacing * i)\r\n\t\t\t// loop time back to beginning once we exceed end of video\r\n\t\t\tv.video!.currentTime = targetTime % duration\r\n\t\t})\r\n\t\treturn state\r\n\t}\r\n\tcase 'adjustActivePlaybackRate':\r\n\t\treturn applyToActive(\r\n\t\t\td=>({playbackRate: d.playbackRate * action.payload}))\r\n\tcase 'syncPlaybackRates':\r\n\t\treturn applyToAll(d=>({playbackRate: action.payload}))\r\n}}","import React from 'react'\r\nimport './Help.css'\r\nimport { ObjectFitProperty } from \"csstype\"\r\nimport {objectFits} from '../AppReducer'\r\nimport AspectRatios from '../AspectRatios.json'\r\ntype AspectRatio = typeof AspectRatios[number]\r\n\r\nconst SHORTCUTS = <section id=\"shortcuts\">\r\n\t<h2>Shortcuts</h2><ol>\r\n\t\t<li><em>C:</em> Clone video (+1m)</li>\r\n\t\t<li><em>D:</em> Distribute times</li>\r\n\t\t<li><em>E:</em> Remove everything else</li>\r\n\t\t<li><em>F:</em> Toggle fullscreen</li>\r\n\t\t<li><em>Shift+F:</em> Fullscreen video</li>\r\n\t\t<li><em>H:</em> Toggle help</li>\r\n\t\t<li><em>I:</em> Toggle in point</li>\r\n\t\t<li><em>O:</em> Toggle out point</li>\r\n\t\t<li><em>M:</em> Toggle mute</li>\r\n\t\t<li><em>R:</em> Remove video</li>\r\n\t\t<li><em>S:</em> Change video scaling</li>\r\n\t\t<li><em>X:</em> Change aspect ratio</li>\r\n\t\t<li><em>← →:</em> Skip 1m</li>\r\n\t\t<li><em>Shift ← →:</em> Skip 10%</li>\r\n\t\t<li><em>Ctrl ← →:</em> Change speed</li>\r\n\t\t<li><em>Shift+S</em> Sync speeds</li>\r\n\t\t<li><em>Ctrl+W:</em> Close tab</li>\r\n\t\t<li><em>O,O:</em> Restart video</li>\r\n\t\t<li><em>2-9:</em> Fill 2-9 size grid</li>\r\n\t\t<li><em>Drag+Drop:</em> Reorder videos</li>\r\n\t</ol>\r\n</section>\r\n\r\nconst DISCLAIMER = <footer>\r\n\t<h2>Privacy Disclaimer</h2>\r\n\t<p>This tool records <b>no</b> filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded.</p>\r\n</footer>\r\n\r\ntype HelpSettingsProps = {\r\n\tobjectFit:ObjectFitProperty\r\n\tobjectFitCallback:(v:ObjectFitProperty)=>void\r\n\taspectRatio:AspectRatio\r\n\taspectRatioCallback:(v:AspectRatio)=>void\r\n}\r\n\r\n// const getAR = (v:AspectRatio) => `${v.ratio.toFixed(2)} / ${v.name}`\r\n\r\nexport function Help(props:HelpSettingsProps) {\r\n\treturn <section id=\"help\">\r\n\t\t<h2>Usage</h2>\r\n\t\t<p>Drag and drop any number of videos to auto-play in an optimally arranged grid.</p>\r\n\t\t<section id=\"settings\">\r\n\t\t\t<h2>Settings</h2>\r\n\t\t\t<form>\r\n\t\t\t\t<SelectInput\r\n\t\t\t\t\tname=\"objectScale\" label=\"Video Fit/Fill\"\r\n\t\t\t\t\tvalue={props.objectFit} choices={objectFits.map(v => <option key={v} value={v}>{v[0].toUpperCase()+v.substr(1)}</option>)}\r\n\t\t\t\t\tcallback={v=>props.objectFitCallback(v as ObjectFitProperty)} /><br />\r\n\t\t\t\t<SelectInput\r\n\t\t\t\t\tname=\"aspectRatio\" label=\"Aspect Ratio\"\r\n\t\t\t\t\tvalue={AspectRatios.indexOf(props.aspectRatio).toString()}\r\n\t\t\t\t\tchoices={AspectRatios.map((v, i) => <option key={i} value={i}>{v.name}</option>)}\r\n\t\t\t\t\tcallback={i=>props.aspectRatioCallback(AspectRatios[parseInt(i)])} /><br />\r\n\t\t\t</form>\r\n\t\t</section>\r\n\t\t{SHORTCUTS}\r\n\t\t{DISCLAIMER}\r\n\t</section>\r\n}\r\n\r\nfunction SelectInput(props:{name:string, label:string, value:string, choices:JSX.Element[], callback:(val:string)=>void}) {\r\n\treturn <>\r\n\t\t<label htmlFor={props.name}>{props.label}</label>\r\n\t\t<select name={props.name} value={props.value} onChange={e => props.callback(e.target.value)}>\r\n\t\t\t{props.choices}\r\n\t\t</select>\r\n\t</>\r\n}\r\n\r\n// type NumInputProps = {\r\n// \tvalue:number\r\n// \tname:string\r\n// \tlabel:string\r\n// \tcallback:(num:number)=>void\r\n// }\r\n// const NumInput = ({value,name,label,callback}:NumInputProps) => <>\r\n// \t<label htmlFor={name}>{label}</label>\r\n// \t<input type=\"number\" min={0} maxLength={3} name={name} value={value} onChange={e => callback(parseFloat(e.target.value))} />\r\n// </>\r\n\r\nexport default Help","import React from 'react'\r\nimport {Display} from '../BDVideo'\r\n\r\ntype ErrorDisplayProps = {\r\n\terrorDisplays:Display[]\r\n\tdismissCallback:()=>void\r\n}\r\nexport function ErrorDisplay({errorDisplays, dismissCallback}:ErrorDisplayProps) {\r\n\treturn <section id=\"errors\">\r\n\t\t<h2>Errors</h2><ol>\r\n\t\t\t{errorDisplays.map((display, i) => <li key={i}>{display.file.name} ({display.file.type})</li>)}\r\n\t\t</ol>\r\n\t\t<p>Only videos supported by your web browser will play successfully.  <code>.mp4</code> and <code>.webm</code> files are good bets.</p>\r\n\t\t<form onSubmit={dismissCallback}><button>Dismiss</button></form>\r\n\t</section>\r\n}\r\n","import React from 'react'\r\n\r\n// TODO: add logo\r\nexport function Splash() {\r\n\treturn <section id=\"splash\">\r\n\t\t<p>Auto-play any number of videos or copies of videos in an optimally arranged grid with simple drag-and-drop.  Videos start half-way in and loop, ensuring immediate, continuous immersion, great for scouring surveillance footage, finding the best highlights from your last gaming stream, and more!</p>\r\n\t\t<p>Find your favourite moments quickly with thumbnail scrubbing and keyboard shortcuts to jump ahead in time 1m (→) or 10% (Shift →), or adjust playback speed (Ctrl →).</p>\r\n\t\t<p>Use shortcut keys to rapidly (c)opy or (r)emove displays, set (i)n/(o)ut loop points, (f)ullscreen the display, toggle (m)ute, etc.</p>\r\n\t\t{/* <img src=\"clipart/surveillance.jpg\" alt=\"Surveillance\" />\r\n\t\t<img src=\"clipart/television.jpg\" alt=\"Television\" /> */}\r\n\t</section>\r\n}\r\n\r\n","// TODO: import only required polyfills\n// import 'react-app-polyfill/ie11'\n// import '@babel/polyfill'\n// import 'core-js/modules/es6.array.from'\n\n// TODO: refence react as third party library on cdn?\nimport React from 'react'\nimport { BDVideo } from './BDVideo'\nimport Help from './components/Help'\nimport { ErrorDisplay } from './components/ErrorDisplay'\nimport { Splash } from './components/Splash'\nimport aspectRatios from './AspectRatios.json'\nimport './App.css'\n\nimport {getVideoSize} from './getVideoSize'\nimport { AppReducer, objectFits, AppAction } from './AppReducer'\n\nconst avg = (arr:number[]) => arr.reduce((a, b) => a + b, 0) / arr.length\n\nfunction stopEvent(e:Event) {\n\te.preventDefault()\n\te.stopPropagation()\n}\n\ntype ActionSet = {[key:string]:AppAction}\n\nfunction App() {\n\tconst [state, dispatch] = React.useReducer(AppReducer, {\n\t\tshowHelp: true,\n\t\tshowThumbnails: true,\n\t\tfirstLoad: true,\n\t\tdisplays: [],\n\t\terrorDisplays: [],\n\t\taspect: aspectRatios[0],\n\t\tfit: objectFits[0]\n\t})\n\n\tconst viewport = React.useRef<HTMLElement>(null)\n\n\tconst globalActions:ActionSet = {\n\t\t\"f\": {type: 'toggleFullscreen'},\n\t\t\"h\": {type: 'toggleHelp'},\n\t\t\"s\": {type: 'nextFit'},\n\t\t\"t\": {type: 'toggleThumbnails'},\n\t\t\"x\": {type: 'nextAspect'}\n\t}\n\n\tReact.useLayoutEffect(() => {\n\t\tconst handleResize = () => {\n\t\t\tconst i = viewport.current!\n\t\t\tconst payload = {\n\t\t\t\tviewport: {\n\t\t\t\t\twidth: i.clientWidth,\n\t\t\t\t\theight: i.clientHeight\n\t\t\t\t}\n\t\t\t}\n\t\t\tdispatch({ type: 'setPartialState', payload })\n\t\t}\n\t\twindow.onresize = () => handleResize()\n\t\thandleResize()\n\t\t// eslint-disable-next-line\n\t}, [])\n\n\tReact.useEffect(() => {\n\t\tdocument.ondragover = stopEvent\n\t\tdocument.ondragenter = stopEvent\n\t\tdocument.ondragleave = stopEvent\n\t}, [])\n\n\tReact.useEffect(() => {\n\t\twindow.onkeydown = (ev) => {\n\t\t\tconst key = ev.key.toLowerCase()\n\t\t\tif (key in globalActions && !ev.shiftKey && !ev.ctrlKey) {\n\t\t\t\treturn dispatch(globalActions[key])\n\t\t\t}\n\n\t\t\tconst i = state.activeIndex\n\t\t\tif (i === undefined) return\n\t\t\tconst ctrlDisplayActions:ActionSet = {\n\t\t\t\t\"arrowleft\": {type: 'adjustActivePlaybackRate', payload: 0.5},\n\t\t\t\t\"arrowright\": {type: 'adjustActivePlaybackRate', payload: 2}\n\t\t\t}\n\t\t\tconst shiftDisplayActions:ActionSet = {\n\t\t\t\t\"s\": {type: 'syncPlaybackRates', payload: state.displays[i].video!.playbackRate}\n\t\t\t}\n\t\t\tconst displayActions:ActionSet = {\n\t\t\t\t\"delete\": {type: 'removeActive'},\n\t\t\t\t\"c\": {type: 'copyDisplay', payload: i},\n\t\t\t\t\"d\": {type: 'distributeTimes', payload: i},\n\t\t\t\t\"e\": {type: 'setExclusive', payload: i},\n\t\t\t\t\"i\": {type: 'setActiveIO', payload: 'in'},\n\t\t\t\t\"o\": {type: 'setActiveIO', payload: 'out'},\n\t\t\t\t\"r\": {type: 'removeActive'},\n\t\t\t}\n\n\t\t\tif (ev.shiftKey) {\n\t\t\t\tkey in shiftDisplayActions && dispatch(shiftDisplayActions[key])\n\t\t\t} else if (ev.ctrlKey) {\n\t\t\t\tkey in ctrlDisplayActions && dispatch(ctrlDisplayActions[key])\n\t\t\t} else {\n\t\t\t\tkey in displayActions && dispatch(displayActions[key])\n\t\t\t\tif (key >= \"2\" && key <= \"9\") {\n\t\t\t\t\tdispatch({type: 'addCopies', payload: parseInt(key)})\n\t\t\t\t\tdispatch({type: 'distributeTimes', payload: i})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [state.displays, state.activeIndex, globalActions])\n\n\tReact.useEffect(() => {\n\t\tdocument.ondrop = e => {\n\t\t\tstopEvent(e)\n\t\t\tif (!e.dataTransfer) return\n\t\t\tconst droppedFiles = e.dataTransfer.files as FileList\n\t\t\tdispatch({type: 'addFiles', payload: Array.from(droppedFiles)})\n\t\t}\n\t}, [])\n\n\tconst getRecommendedAspect = React.useCallback(() => {\n\t\tconst avgRatio = avg(state.displays.map(i => i.video!.videoWidth / i.video!.videoHeight))\n\t\tconst closestRatio = [...aspectRatios].sort((a, b) => Math.abs(avgRatio - b.ratio) - Math.abs(avgRatio - a.ratio)).pop()!\n\t\treturn closestRatio\n\t}, [state.displays])\n\n\tconst size = React.useMemo(() => getVideoSize(\n\t\tstate.aspect.ratio,\n\t\tstate.displays.length,\n\t\tstate.viewport || {width: 1, height: 1}\n\t), [state.aspect, state.displays, state.viewport])\n\n\treturn <>\n\t\t<main ref={viewport}\n\t\t\tonDrop={e => dispatch({type: 'reorderDisplays', payload: e.target})}>\n\t\t\t{state.displays.length === 0 && <Splash />}\n\t\t\t{state.displays.map((d, i) => <BDVideo size={size} objectFit={state.fit} key={d.id} display={d}\n\t\t\t\tshowOverlay={state.activeIndex === i}\n\t\t\t\tshowThumbnail={state.showThumbnails}\n\t\t\t\tonDrag={i => dispatch({type: 'setPartialState', payload: {dragSrc: d}})}\n\t\t\t\tonMouseOver={() => dispatch({type: 'setPartialState', payload: {activeIndex: i}})}\n\t\t\t\tonMouseOut={()=>dispatch({type: 'setPartialState', payload: {activeIndex: undefined}})}\n\t\t\t\t// TODO: need to watch for load of all videos!  This method is broken\n\t\t\t\t// onLoad={() => d.triggerResize && api.setPartialState({aspect: getRecommendedAspect()})}\n\t\t\t\tonLoad={() => dispatch({type: 'setPartialState', payload: {aspect: getRecommendedAspect()}})}\n\t\t\t\tonError={() => dispatch({type: 'handleDisplayError', payload: i})}\n\t\t\t\tremoveCallback={()=>dispatch({type: 'removeActive'})}\n\t\t\t\tcopyCallback={()=>dispatch({type: 'copyDisplay', payload: i})}\n\t\t\t\texclusiveCallback={() => dispatch({type: 'setExclusive', payload: i})}\n\t\t\t\tstaggerCallback={() => dispatch({type: 'distributeTimes', payload: i})}\n\t\t\t\tinCallback={() => dispatch({type: 'setActiveIO', payload: 'in'})}\n\t\t\t\toutCallback={() => dispatch({type: 'setActiveIO', payload: 'out'})}\n\t\t\t\tspeedCallback={i => dispatch({type: 'adjustActivePlaybackRate', payload: i})}\n\t\t\t/>)}\n\t\t</main>\n\t\t{state.errorDisplays.length > 0 && <ErrorDisplay errorDisplays={state.errorDisplays} dismissCallback={()=>dispatch({type: 'dismissErrors'})} />}\n\t\t{state.showHelp && <Help\n\t\t\taspectRatio={state.aspect}\n\t\t\tobjectFit={state.fit}\n\t\t\taspectRatioCallback={i=>dispatch({type: 'setPartialState', payload: {aspect: i}})}\n\t\t\tobjectFitCallback={i=>dispatch({type: 'setPartialState', payload: {fit: i}})} />}\n\t</>\n}\n\nexport default App","export function getVideoSize(aspectRatio:number, objects:number, constraints:{width:number,height:number}) {\r\n\t// try every number of rows up to a dedicated row for each video\r\n\tlet bestArea = 0, width = 0, height = 0\r\n\tfor (let rows = 1; rows <= objects; rows++) {\r\n\t\t// get the necessary number of columns with a given number of rows\r\n\t\tconst cols = Math.ceil(objects / rows)\r\n\t\t// this determines the size of the resulting box\r\n\t\tconst x = Math.floor(constraints.width / cols)\r\n\t\tconst y = Math.floor(constraints.height / rows)\r\n\t\t// actual video dimensions will depend on ratio within the display box, being shrunk on one side\r\n\t\tlet vx = x, vy = y\r\n\t\tif (aspectRatio > x/y) {\r\n\t\t\tvy = vx / aspectRatio\r\n\t\t} else {\r\n\t\t\tvx = vy * aspectRatio\r\n\t\t}\r\n\t\tconst videoArea = vx * vy\r\n\t\t// if this isn't an improvement, continue looking\r\n\t\tif (videoArea < bestArea) continue\r\n\t\t// otherwise save this as best situation\r\n\t\tbestArea = videoArea\r\n\t\twidth = x\r\n\t\theight = y\r\n\t}\r\n\r\n\treturn {width, height}\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.1/8 is considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then(registration => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then(response => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t);\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then(registration => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister()\nserviceWorker.register()\n"],"sourceRoot":""}