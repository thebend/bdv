(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(22)},17:function(e,t,n){},18:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),l=n(2),c=n(1),u=n(4);function s(e){(e.requestFullscreen||e.msRequestFullscreen||e.webkitRequestFullscreen).call(e)}var m=document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled,f=(document.exitFullscreen||document.msExitFullscreen||document.webkitExitFullscreen).bind(document);var d=navigator.userAgent.indexOf(" Trident/")>-1?"IE":navigator.userAgent.indexOf(" Edge/")>-1?"Edge":"Chrome",v=["Edge","IE"].indexOf(d)>-1,p={edge:{left:116,right:220,bottom:24},chrome:{left:24,right:24,bottom:16}}["Chrome"===d?"chrome":"edge"],b=10;function h(e){var t=e.offset,n=e.color,a={bottom:p.bottom+b/2,left:p.left+t-b/2};return r.a.createElement("svg",{className:"iomarker",width:b,height:b,viewBox:"0 0 2 2",style:a},r.a.createElement("circle",{cx:1,cy:1,r:1,fill:n}))}n(17);var E=80,g=p.bottom+8,y=3e3;function O(e){var t=e.inTime,n=e.outTime,a=e.playbackRate,i=e.showThumbnail,o=e.display,l=e.onLoad,m=e.onError,f=e.onDrag,b=e.size,h=e.onMouseOver,O=e.onMouseOut,j=e.objectFit,C=e.showOverlay,T=e.removeCallback,R=e.copyCallback,S=e.exclusiveCallback,F=e.inCallback,D=e.outCallback,x=e.speedCallback,A=r.a.useState(),P=Object(u.a)(A,2),I=P[0],M=P[1],H=I,L=r.a.useCallback(function(e){M(e)},[]),W=r.a.useState(),U=Object(u.a)(W,2),z=U[0],N=U[1],K=r.a.useState(),q=Object(u.a)(K,2),V=q[0],X=q[1];r.a.useEffect(function(){H&&(H.ontimeupdate=function(e){var a=n&&n<H.currentTime,r=t&&t>H.currentTime;(a||r)&&(H.currentTime=t||0)},H.addEventListener("mouseover",function(e){return H.focus()}))},[t,n,H]);var B=r.a.useCallback(function(e){if(H.height-e.layerY>g)return X(void 0);var t=H.width-p.left-p.right,n=(e.layerX-p.left)/t;if(n<0||n>1)return X(void 0);var a=H.duration*n;X({offset:e.layerX,timestamp:a})},[H]);function J(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=H.duration*e),H.currentTime=(H.currentTime+e+H.duration)%H.duration}r.a.useEffect(function(){H&&(H.playbackRate=a)},[a,H]),r.a.useEffect(function(){H&&(H.onmouseover=i&&"IE"!==d?B:null)},[i,B,H]),r.a.useEffect(function(){H&&(o.video=H,o.startTime?H.onload=function(){H.currentTime=o.startTime}:(H.onerror=m,H.onloadeddata=function(e){return H.currentTime=H.duration/2},H.onloadedmetadata=l),H.ondragstart=function(e){e.target.height-e.offsetY<E?e.preventDefault():f(o)},H.onmousemove=function(e){i&&"IE"!==d&&B(e),z&&clearTimeout(z),N(setTimeout(function(){return N(void 0)},y))},H.onmouseout=function(e){X(void 0)})},[o,B,f,m,l,z,i,H]);var Y={arrowleft:function(){return J(-.1,!0)},arrowright:function(){return J(.1,!0)},f:function(){return H&&s(H)}},$={m:function(){H.muted=!H.muted},arrowleft:function(){return J(-60)},arrowright:function(){return J(60)}};function G(e,t){t in e&&e[t]()}return r.a.createElement("div",Object.assign({className:"display"},b,{onMouseOver:h,onMouseOut:O,onKeyDown:function(e){var t=e.key.toLowerCase();e.shiftKey?G(Y,t):G($,t)}}),z&&r.a.createElement("div",{className:"display-border",style:Object(c.a)({},b,{pointerEvents:v?"none":"auto"})},"".concat(o.file.name).concat(1===a?"":" ("+a+"x)")),z&&r.a.createElement("div",{className:"display-controls"},r.a.createElement("button",{onClick:T},"X"),r.a.createElement("button",{onClick:R},"C"),r.a.createElement("button",{onClick:S},"E"),r.a.createElement("button",{onClick:F},"I"),r.a.createElement("button",{onClick:D},"O"),r.a.createElement("button",{onClick:function(){return x(2)}},"\xbb"),r.a.createElement("button",{onClick:function(){return x(.5)}},"\xab")),C&&r.a.createElement(k,Object.assign({inTime:t,outTime:n},{video:I})),i&&V&&r.a.createElement(w,Object.assign({src:o.url},V)),r.a.createElement("video",Object.assign({controls:!0,autoPlay:!0,loop:!0,muted:!0,src:o.url,draggable:!v},b,{ref:L,style:{objectFit:j}})))}var w=function(e){var t=e.src,n=e.offset,a=e.timestamp,i=e.width,o=void 0===i?196:i,l=r.a.useRef(null);return r.a.useEffect(function(){l.current.currentTime=a},[a]),r.a.createElement("video",{className:"thumbnail",ref:l,controls:!1,autoPlay:!1,loop:!1,muted:!0,src:t,width:o,style:{left:n-o/2}})},k=function(e){var t=e.inTime,n=e.outTime,a=e.video;if(!t&&!n)return r.a.createElement(r.a.Fragment,null);var i=a.duration,o=t||0,l=n||i,c=a.width-p.left-p.right,u=o/i*c,s=l/i*c;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{offset:u,color:"gold"}),r.a.createElement(h,{offset:s,color:"gold"}))},j=(n(18),n(5)),C=n(6),T=n.n(C),R=n(3),S=["contain","cover","fill","scale-down"],F=function(e){return Object(c.a)({},e,{id:T()(),startTime:e.video?(e.video.currentTime+60)%e.video.duration:0})},D=function(e,t){return e[(e.indexOf(t)+1)%e.length]},x=function(e,t){var n=e.indexOf(t);return[].concat(Object(l.a)(e.slice(0,n)),Object(l.a)(e.slice(n+1)))},A=function(e){var t=e.state,n=e.setState,a=function(e){n(function(t){var n=t.active;if(void 0===n)return t;var a=t.displays.indexOf(n);return Object(c.a)({},t,{displays:[].concat(Object(l.a)(t.displays.slice(0,a)),[Object(c.a)({},n,e(n))],Object(l.a)(t.displays.slice(a+1)))})})},r=function(e){n(function(t){var n=t.displays.map(function(t){return Object(c.a)({},t,e(t))});return Object(c.a)({},t,n)})};return Object(c.a)({},t,{setPartialState:function(e){n(function(t){return Object(c.a)({},t,e)})},toggleHelp:function(){n(function(e){return Object(c.a)({},e,{showHelp:!e.showHelp})})},toggleThumbnails:function(){n(function(e){return Object(c.a)({},e,{showThumbnails:!e.showThumbnails})})},nextAspect:function(){n(function(e){return Object(c.a)({},e,{aspect:D(R,e.aspect)})})},nextFit:function(){n(function(e){return Object(c.a)({},e,{fit:D([].concat(S),e.fit)})})},setViewport:function(e){n(function(t){return Object(c.a)({},t,{viewport:e})})},setExclusive:function(e){n(function(t){return Object(c.a)({},t,{activeIndex:0,displays:[e]})})},removeActive:function(){n(function(e){return void 0===e.active?e:Object(c.a)({},e,{displays:x(e.displays,e.active),active:void 0})})},copyDisplay:function(e){n(function(t){return Object(c.a)({},t,{displays:[].concat(Object(l.a)(t.displays),[F(e)])})})},addCopies:function(e){n(function(t){var n=t.active;return void 0===n?t:Object(c.a)({},t,{displays:[].concat(Object(l.a)(t.displays),Object(l.a)(Object(l.a)(Array(e)).map(function(){return F(n)})))})})},updateDisplay:function(e,t){n(function(n){var a=Object(l.a)(n.displays),r=a.indexOf(e);return a[r]=Object(c.a)({},a[r],t),Object(c.a)({},n,{displays:a})})},applyToActive:a,applyToAll:r,setActiveIO:function(e){a(function(t){return Object(j.a)({},e,t.video.currentTime)})},adjustActivePlaybackRate:function(e){a(function(t){return{playbackRate:t.playbackRate*e}})},syncPlaybackRates:function(e){r(function(t){return{playbackRate:e}})},addFiles:function(e){n(function(t){var n=e.map(function(e){return{id:T()(),file:e,url:URL.createObjectURL(e),triggerResize:t.firstLoad,playbackRate:1}});return Object(c.a)({},t,{firstLoad:!1,showHelp:t.showHelp&&0===n.length,displays:[].concat(Object(l.a)(t.displays),Object(l.a)(n))})})},handleDisplayError:function(){n(function(e){var t=e.active;return void 0===t?e:Object(c.a)({},e,{displays:x(e.displays,t),errorDisplays:[].concat(Object(l.a)(e.errorDisplays),[t])})})},dismissErrors:function(){n(function(e){return Object(c.a)({},e,{errorDisplays:[]})})},distributeTimes:function(e){var t=e.video;if(t){var a=e.file;n(function(n){var r=n.displays.filter(function(e){return e.file===a}),i=r.indexOf(e),o=[e].concat(Object(l.a)(r.slice(i+1)),Object(l.a)(r.slice(0,i))),c=t.currentTime,u=t.duration,s=u/o.length;return o.forEach(function(e,t){var n=c+s*t;e.video.currentTime=n%u}),n})}},reorderDisplays:function(e){n(function(t){var n=t.dragSrc;if(void 0===n)return t;var a=t.displays,r=a.indexOf(n),i=a.findIndex(function(t){return t.video===e})||a.length-1,o=r>i?[].concat(Object(l.a)(a.slice(0,i)),[a[r]],Object(l.a)(a.slice(i,r)),Object(l.a)(a.slice(r+1))):[].concat(Object(l.a)(a.slice(0,r)),Object(l.a)(a.slice(r+1,i+1)),[a[r]],Object(l.a)(a.slice(i+1)));return Object(c.a)({},t,{displays:o})})}})},P=r.a.createElement("section",{id:"shortcuts"},r.a.createElement("h2",null,"Shortcuts"),r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement("em",null,"C:")," Clone video (+1m)"),r.a.createElement("li",null,r.a.createElement("em",null,"D:")," Distribute times"),r.a.createElement("li",null,r.a.createElement("em",null,"E:")," Remove everything else"),r.a.createElement("li",null,r.a.createElement("em",null,"F:")," Toggle fullscreen"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift+F:")," Fullscreen video"),r.a.createElement("li",null,r.a.createElement("em",null,"H:")," Toggle help"),r.a.createElement("li",null,r.a.createElement("em",null,"I:")," Toggle in point"),r.a.createElement("li",null,r.a.createElement("em",null,"O:")," Toggle out point"),r.a.createElement("li",null,r.a.createElement("em",null,"M:")," Toggle mute"),r.a.createElement("li",null,r.a.createElement("em",null,"R:")," Remove video"),r.a.createElement("li",null,r.a.createElement("em",null,"S:")," Change video scaling"),r.a.createElement("li",null,r.a.createElement("em",null,"X:")," Change aspect ratio"),r.a.createElement("li",null,r.a.createElement("em",null,"\u2190 \u2192:")," Skip 1m"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift \u2190 \u2192:")," Skip 10%"),r.a.createElement("li",null,r.a.createElement("em",null,"Ctrl \u2190 \u2192:")," Change speed"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift+S")," Sync speeds"),r.a.createElement("li",null,r.a.createElement("em",null,"Ctrl+W:")," Close tab"),r.a.createElement("li",null,r.a.createElement("em",null,"O,O:")," Restart video"),r.a.createElement("li",null,r.a.createElement("em",null,"2-9:")," Fill 2-9 size grid"),r.a.createElement("li",null,r.a.createElement("em",null,"Drag+Drop:")," Reorder videos"))),I=r.a.createElement("footer",null,r.a.createElement("h2",null,"Privacy Disclaimer"),r.a.createElement("p",null,"This tool records ",r.a.createElement("b",null,"no")," filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded."));function M(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:e.name},e.label),r.a.createElement("select",{name:e.name,value:e.value,onChange:function(t){return e.callback(t.target.value)}},e.choices))}var H=function(e){return r.a.createElement("section",{id:"help"},r.a.createElement("h2",null,"Usage"),r.a.createElement("p",null,"Drag and drop any number of videos to auto-play in an optimally arranged grid."),r.a.createElement("section",{id:"settings"},r.a.createElement("h2",null,"Settings"),r.a.createElement("form",null,r.a.createElement(M,{name:"objectScale",label:"Video Fit/Fill",value:e.objectFit,choices:S.map(function(e){return r.a.createElement("option",{key:e,value:e},e[0].toUpperCase()+e.substr(1))}),callback:function(t){return e.objectFitCallback(t)}}),r.a.createElement("br",null),r.a.createElement(M,{name:"aspectRatio",label:"Aspect Ratio",value:R.indexOf(e.aspectRatio).toString(),choices:R.map(function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)}),callback:function(t){return e.aspectRatioCallback(R[parseInt(t)])}}),r.a.createElement("br",null))),P,I)};function L(e){var t=e.errorDisplays,n=e.dismissCallback;return r.a.createElement("section",{id:"errors"},r.a.createElement("h2",null,"Errors"),r.a.createElement("ol",null,t.map(function(e,t){return r.a.createElement("li",{key:t},e.file.name," (",e.file.type,")")})),r.a.createElement("p",null,"Only videos supported by your web browser will play successfully.  ",r.a.createElement("code",null,".mp4")," and ",r.a.createElement("code",null,".webm")," files are good bets."),r.a.createElement("form",{onSubmit:n},r.a.createElement("button",null,"Dismiss")))}function W(){return r.a.createElement("section",{id:"splash"},r.a.createElement("p",null,"Auto-play any number of videos or copies of videos in an optimally arranged grid with simple drag-and-drop.  Videos start half-way in and loop, ensuring immediate, continuous immersion, great for scouring surveillance footage, finding the best highlights from your last gaming stream, and more!"),r.a.createElement("p",null,"Find your favourite moments quickly with thumbnail scrubbing and keyboard shortcuts to jump ahead in time 1m (\u2192) or 10% (Shift \u2192), or adjust playback speed (Ctrl \u2192)."),r.a.createElement("p",null,"Use shortcut keys to rapidly (c)opy or (r)emove displays, set (i)n/(o)ut loop points, (f)ullscreen the display, toggle (m)ute, etc."))}n(21);var U=function(e,t){var n=Object(a.useState)(t),r=Object(u.a)(n,2),i=r[0],o=r[1];return Object(a.useMemo)(function(){return e({state:i,setState:o})},[i,e])};var z=function(e){return e.reduce(function(e,t){return e+t},0)/e.length};function N(e){e.preventDefault(),e.stopPropagation()}function K(e,t){t in e&&e[t]()}var q=function(){var e=U(A,{showHelp:!0,showThumbnails:!0,firstLoad:!0,displays:[],errorDisplays:[],aspect:R[0],fit:S[0]}),t=r.a.useRef(null),n={f:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;m&&(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement?f():s(e))}()},h:e.toggleHelp,s:e.nextFit,t:e.toggleThumbnails,x:e.nextAspect},a=function(){var n=t.current;e.setViewport({width:n.clientWidth,height:n.clientHeight})};r.a.useLayoutEffect(function(){window.onresize=function(){return a()},a()},[]),r.a.useEffect(function(){document.ondragover=N,document.ondragenter=N,document.ondragleave=N},[]),r.a.useEffect(function(){window.onkeydown=function(t){var a=t.key.toLowerCase();if(a in n&&!t.shiftKey&&!t.ctrlKey)return n[a]();var r=e.active;if(void 0!==r){var i={arrowleft:function(){return e.adjustActivePlaybackRate(.5)},arrowright:function(){return e.adjustActivePlaybackRate(2)}},o={s:function(){return e.syncPlaybackRates(r.video.playbackRate)}},l={delete:e.removeActive,c:function(){return e.copyDisplay(r)},d:function(){return e.distributeTimes(r)},e:function(){return e.active&&e.setExclusive(e.active)},i:function(){return e.setActiveIO("in")},o:function(){return e.setActiveIO("out")},r:e.removeActive};t.shiftKey?K(o,a):t.ctrlKey?K(i,a):(K(l,a),a>="2"&&a<="9"&&(e.addCopies(parseInt(a)),e.distributeTimes(r)))}}},[e,n]),r.a.useEffect(function(){document.ondrop=function(t){if(N(t),t.dataTransfer){var n=t.dataTransfer.files;e.addFiles(Array.from(n))}}},[e]);var i=r.a.useCallback(function(){var t=z(e.displays.map(function(e){return e.video.videoWidth/e.video.videoHeight}));return Object(l.a)(R).sort(function(e,n){return Math.abs(t-n.ratio)-Math.abs(t-e.ratio)}).pop()},[e.displays]),o=r.a.useMemo(function(){return function(e,t,n){for(var a=0,r=0,i=0,o=1;o<=t;o++){var l=Math.ceil(t/o),c=Math.floor(n.width/l),u=Math.floor(n.height/o),s=c,m=u;e>c/u?m=s/e:s=m*e;var f=s*m;f<a||(a=f,r=c,i=u)}return{width:r,height:i}}(e.aspect.ratio,e.displays.length,e.viewport||{width:1,height:1})},[e.aspect,e.displays,e.viewport]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{ref:t,onDrop:function(t){return e.reorderDisplays(t.target)}},0===e.displays.length&&r.a.createElement(W,null),e.displays.map(function(t){return r.a.createElement(O,{size:o,objectFit:e.fit,key:t.id,display:t,showOverlay:t===e.active,showThumbnail:e.showThumbnails,playbackRate:t.playbackRate,onDrag:function(t){return e.setPartialState({dragSrc:t})},onMouseOver:function(){return e.setPartialState({active:t})},onMouseOut:function(){return e.setPartialState({active:void 0})},onLoad:function(){return t.triggerResize&&e.setPartialState({aspect:i()})},onError:function(){return e.handleDisplayError()},inTime:t.in,outTime:t.out,removeCallback:e.removeActive,copyCallback:function(){return e.copyDisplay(t)},exclusiveCallback:function(){return e.setExclusive(t)},staggerCallback:function(){return e.distributeTimes(t)},inCallback:function(){return e.setActiveIO("in")},outCallback:function(){return e.setActiveIO("out")},speedCallback:function(t){return e.adjustActivePlaybackRate(t)}})})),e.errorDisplays.length>0&&r.a.createElement(L,{errorDisplays:e.errorDisplays,dismissCallback:e.dismissErrors}),e.showHelp&&r.a.createElement(H,{aspectRatio:e.aspect,objectFit:e.fit,aspectRatioCallback:function(t){return e.setPartialState({aspect:t})},objectFitCallback:function(t){return e.setPartialState({fit:t})}}))},V=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(q,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");V?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):X(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):X(t,e)})}}()},3:function(e){e.exports=[{ratio:1.7777777777777777,name:"16:9 (High Def)"},{ratio:1.3333333333333333,name:"4:3 (Standard Def)"},{ratio:1,name:"1:1 (Square)"},{ratio:.5625,name:"9:16 (Vertical HD)"},{ratio:1.85,name:"1.85:1 (Cinematic)"},{ratio:2.35,name:"2.35:1 (Anamorphic)"}]}},[[11,1,2]]]);
//# sourceMappingURL=main.f753eb5d.chunk.js.map