(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(8),l=n.n(r),o=n(1),s=n(3),c=n(5),u=n(4),d=n(2),m=n(6);n(15),n(16);function f(e){(e.requestFullscreen||e.msRequestFullscreen||e.webkitRequestFullscreen).call(e)}var h=document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled,p=(document.exitFullscreen||document.msExitFullscreen||document.webkitExitFullscreen).bind(document);var v=navigator.userAgent.indexOf(" Trident/")>-1?"IE":navigator.userAgent.indexOf(" Edge/")>-1?"Edge":"Chrome",y=["Edge","IE"].indexOf(v)>-1,b={edge:{left:116,right:220,bottom:24},chrome:{left:24,right:24,bottom:16}},g="Chrome"===v?b.chrome:b.edge,E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).video=i.a.createRef(),n.thumbnail=i.a.createRef(),n.dragMargin=80,n.thumbnailWidth=196,n.thumbnailMargin=g.bottom+8,n.hoverThumbnail=function(e){var t=n.video.current;if(t)if(t.height-e.layerY>n.thumbnailMargin)n.setState({thumbnailState:void 0});else{var a=t.width-g.left-g.right,i=(e.layerX-g.left)/a;if(i<0||i>1)n.setState({thumbnailState:void 0});else{var r=t.duration*i;n.setState({thumbnailState:{offsetX:e.layerX-n.thumbnailWidth/2,timestamp:r}})}}},n.hideTimeout=function(){n.setState({overlayTimeout:void 0})},n.state={},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"setIO",value:function(){var e=this.props,t=e.inTime,n=e.outTime,a=this.video.current;a.ontimeupdate=function(e){var i=n&&n<a.currentTime,r=t&&t>a.currentTime;(i||r)&&(a.currentTime=t||0)}}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.playbackRate,n=e.showThumbnail,a=this.video.current,i=t||1;if(a.playbackRate=i,this.setIO(),n&&"IE"!==v){var r=this.state.thumbnailState,l=this.thumbnail.current;l&&r&&(l.currentTime=r.timestamp),a.onmouseover=this.hoverThumbnail}else a.onmouseover=null}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.display,a=t.onLoad,i=t.onError,r=t.onDrag,l=t.showThumbnail,o=this.video.current;n.video=o,n.startTime?o.onload=function(){o.currentTime=n.startTime}:(o.onerror=i,o.onloadeddata=function(e){return o.currentTime=o.duration/2},o.onloadedmetadata=a),o.ondragstart=function(t){t.target.height-t.offsetY<e.dragMargin?t.preventDefault():r(n)},o.onmousemove=function(t){l&&"IE"!==v&&e.hoverThumbnail(t);var n=e.props.overlayDuration,a=e.state.overlayTimeout;a&&clearTimeout(a),e.setState({overlayTimeout:setTimeout(e.hideTimeout,n||3e3)})},o.onmouseout=function(t){e.setState({thumbnailState:void 0})},this.setIO()}},{key:"getIO",value:function(){var e=this.props,t=e.inTime,n=e.outTime,a=this.video.current;if(t||n){var r=a.duration,l=t||0,o=n||r,s=a.width-g.left-g.right,c=l/r*s,u=o/r*s;return i.a.createElement(i.a.Fragment,null,i.a.createElement(k,{offset:c,color:"gold"}),i.a.createElement(k,{offset:u,color:"gold"}))}}},{key:"adjustDisplayTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.video.current,a=n.duration;t&&(e*=a);var i=a-n.currentTime;n.currentTime=e>i?e-i:n.currentTime+e}},{key:"render",value:function(){var e=this,t=this.props,n=t.size,a=t.onMouseOver,r=t.onMouseOut,l=t.display,o=t.objectFit,s=t.showOverlay,c=t.showThumbnail,u=t.playbackRate,d=t.removeCallback,m=t.copyCallback,h=t.exclusiveCallback,p=t.inCallback,v=t.outCallback,b=t.speedCallback,g=this.state,E=g.thumbnailState,k=g.overlayTimeout;return i.a.createElement("div",Object.assign({className:"display"},n,{onMouseOver:a,onMouseOut:r,onKeyDown:function(t){var n=e.video.current,a=t.key.toLowerCase();if(t.shiftKey){var i={arrowleft:function(){return e.adjustDisplayTime(-.1,!0)},arrowright:function(){return e.adjustDisplayTime(.1,!0)},f:function(){return f(n)}};a in i&&i[a]()}else if(t.ctrlKey){var r={};a in r&&r[a]()}else{var l={m:function(){return n.muted=!n.muted},arrowleft:function(){return e.adjustDisplayTime(-60)},arrowright:function(){return e.adjustDisplayTime(60)}};a in l&&l[a]()}console.log(a)}}),k&&i.a.createElement("div",{className:"display-border",style:{width:"".concat(n.width,"px"),height:"".concat(n.height,"px"),pointerEvents:y?"none":"auto"}},"".concat(l.file.name).concat(1===u?"":" ("+u+"x)")),k&&i.a.createElement("div",{className:"display-controls"},i.a.createElement("button",{onClick:d},"X"),i.a.createElement("button",{onClick:function(){return m()}},"C"),i.a.createElement("button",{onClick:h},"E"),i.a.createElement("button",{onClick:p},"I"),i.a.createElement("button",{onClick:v},"O"),i.a.createElement("button",{onClick:function(){return b(2)}},"\xbb"),i.a.createElement("button",{onClick:function(){return b(.5)}},"\xab")),s&&this.getIO(),c&&E&&i.a.createElement("video",{controls:!1,autoPlay:!1,loop:!1,muted:!0,src:l.url,width:this.thumbnailWidth,className:"thumbnail",ref:this.thumbnail,style:{left:E.offsetX}}),i.a.createElement("video",Object.assign({controls:!0,autoPlay:!0,loop:!0,muted:!0,src:l.url,draggable:!y},n,{ref:this.video,style:{objectFit:o}})))}}]),t}(i.a.Component);function k(e){var t=e.offset,n=e.color,a=g.bottom;return i.a.createElement("svg",{className:"iomarker",width:10,height:10,viewBox:"0 0 2 2",style:{bottom:a+5,left:g.left+t-5}},i.a.createElement("circle",{cx:1,cy:1,r:1,fill:n}))}var w=[{ratio:16/9,name:"16:9 (High Def)"},{ratio:4/3,name:"4:3 (Standard Def)"},{ratio:1,name:"1:1 (Square)"},{ratio:9/16,name:"9:16 (Vertical HD)"},{ratio:1.85,name:"1.85:1 (Cinematic)"},{ratio:2.35,name:"2.35:1 (Anamorphic)"}],S=(n(17),i.a.createElement("section",{id:"shortcuts"},i.a.createElement("h2",null,"Shortcuts"),i.a.createElement("ol",null,i.a.createElement("li",null,i.a.createElement("em",null,"C:")," Clone video (+1m)"),i.a.createElement("li",null,i.a.createElement("em",null,"D:")," Distribute times"),i.a.createElement("li",null,i.a.createElement("em",null,"E:")," Remove everything else"),i.a.createElement("li",null,i.a.createElement("em",null,"F:")," Toggle fullscreen"),i.a.createElement("li",null,i.a.createElement("em",null,"Shift+F:")," Fullscreen video"),i.a.createElement("li",null,i.a.createElement("em",null,"H:")," Toggle help"),i.a.createElement("li",null,i.a.createElement("em",null,"I:")," Toggle in point"),i.a.createElement("li",null,i.a.createElement("em",null,"O:")," Toggle out point"),i.a.createElement("li",null,i.a.createElement("em",null,"M:")," Toggle mute"),i.a.createElement("li",null,i.a.createElement("em",null,"R:")," Remove video"),i.a.createElement("li",null,i.a.createElement("em",null,"S:")," Change video scaling"),i.a.createElement("li",null,i.a.createElement("em",null,"X:")," Change aspect ratio"),i.a.createElement("li",null,i.a.createElement("em",null,"\u2190 \u2192:")," Skip 1m"),i.a.createElement("li",null,i.a.createElement("em",null,"Shift \u2190 \u2192:")," Skip 10%"),i.a.createElement("li",null,i.a.createElement("em",null,"Ctrl \u2190 \u2192:")," Change speed"),i.a.createElement("li",null,i.a.createElement("em",null,"Shift+S")," Sync speeds"),i.a.createElement("li",null,i.a.createElement("em",null,"Ctrl+W:")," Close tab"),i.a.createElement("li",null,i.a.createElement("em",null,"O,O:")," Restart video"),i.a.createElement("li",null,i.a.createElement("em",null,"2-9:")," Fill 2-9 size grid"),i.a.createElement("li",null,i.a.createElement("em",null,"Drag+Drop:")," Reorder videos")))),T=i.a.createElement("footer",null,i.a.createElement("h2",null,"Privacy Disclaimer"),i.a.createElement("p",null,"This tool records ",i.a.createElement("b",null,"no")," filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded."));function O(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{htmlFor:e.name},e.label),i.a.createElement("select",{name:e.name,value:e.value,onChange:function(t){return e.callback(t.target.value)}},e.choices))}var D=function(e){return i.a.createElement("section",{id:"help"},i.a.createElement("h2",null,"Usage"),i.a.createElement("p",null,"Drag and drop any number of videos to auto-play in an optimally arranged grid."),i.a.createElement("section",{id:"settings"},i.a.createElement("h2",null,"Settings"),i.a.createElement("form",null,i.a.createElement(O,{name:"objectScale",label:"Video Fit/Fill",value:e.objectFit,choices:R.map(function(e,t){return i.a.createElement("option",{key:t,value:e},e[0].toUpperCase()+e.substr(1))}),callback:function(t){return e.objectFitCallback(t)}}),i.a.createElement("br",null),i.a.createElement(O,{name:"aspectRatio",label:"Aspect Ratio",value:w.indexOf(e.aspectRatio).toString(),choices:w.map(function(e,t){return i.a.createElement("option",{key:t,value:t},e.name)}),callback:function(t){return e.aspectRatioCallback(w[parseInt(t)])}}),i.a.createElement("br",null))),S,T)},R=["contain","cover","fill","scale-down"],j=i.a.createElement("section",{id:"splash"},i.a.createElement("p",null,"Auto-play any number of videos or copies of videos in an optimally arranged grid with simple drag-and-drop.  Videos start half-way in and loop, ensuring immediate, continuous immersion, great for scouring surveillance footage, finding the best highlights from your last gaming stream, and more!"),i.a.createElement("p",null,"Find your favourite moments quickly with thumbnail scrubbing and keyboard shortcuts to jump ahead in time 1m (\u2192) or 10% (Shift \u2192), or adjust playback speed (Ctrl \u2192)."),i.a.createElement("p",null,"Use shortcut keys to rapidly (c)opy or (r)emove displays, set (i)n/(o)ut loop points, (f)ullscreen the display, toggle (m)ute, etc."));function C(e){e.preventDefault(),e.stopPropagation()}function x(e){var t=e.errorDisplays,n=e.dismissCallback;return i.a.createElement("section",{id:"errors"},i.a.createElement("h2",null,"Errors"),i.a.createElement("ol",null,t.map(function(e,t){return i.a.createElement("li",{key:t},e.file.name," (",e.file.type,")")})),i.a.createElement("p",null,"Only videos supported by your web browser will play successfully.  ",i.a.createElement("code",null,".mp4")," and ",i.a.createElement("code",null,".webm")," files are good bets."),i.a.createElement("form",{onSubmit:n},i.a.createElement("button",null,"Dismiss")))}var F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).viewport=i.a.createRef(),n.globalActions={f:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;h&&(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement?p():f(e))}()},h:function(){return n.setState({showHelp:!n.state.showHelp})},s:function(){return n.nextObjectFit()},t:function(){return n.setState({showThumbnails:!n.state.showThumbnails})},x:function(){return n.nextDimensionRatio()}},n.handleDropEvent=function(e){if(C(e),e.dataTransfer){var t=n.state.firstBatch,a=e.dataTransfer.files,i=Array.from(a),r=n.state.maxId,l=i.map(function(e){return{id:++r,file:e,url:URL.createObjectURL(e),triggerResize:t,playbackRate:1}});n.setState({displays:n.state.displays.concat(l),maxId:r,firstBatch:!1,showHelp:n.state.showHelp&&0===i.length})}},n.handleKeyPress=function(e){var t=e.key.toLowerCase();if(t in n.globalActions&&!e.shiftKey&&!e.ctrlKey)n.globalActions[t]();else{var a=n.state.activeDisplay;if(a)if(e.shiftKey){var i={s:function(){return n.syncPlaybackRates(a.playbackRate)}};t in i&&i[t]()}else if(e.ctrlKey){var r={arrowleft:function(){return n.adjustVideoSpeed(a,.5)},arrowright:function(){return n.adjustVideoSpeed(a,2)}};t in r&&r[t]()}else{var l={delete:function(){return n.deleteDisplay(a)},c:function(){return n.addDisplayCopy(a)},d:function(){return n.distributeTimes(a)},e:function(){return n.setState({displays:[a]})},i:function(){return n.setVideoIO(a,"in")},o:function(){return n.setVideoIO(a,"out")},r:function(){return n.deleteDisplay(a)}};t in l&&l[t](),t>="2"&&t<="9"&&(n.fillGrid(a,parseInt(t)),n.distributeTimes(a))}}},n.updateDimensions=function(){var e=n.viewport.current,t={x:e.clientWidth,y:e.clientHeight};n.setState({viewport:t})},n.state={showHelp:!0,showThumbnails:!0,displays:[],maxId:0,ratioIndex:0,aspectRatio:w[0],objectFitIndex:0,objectFit:R[0],firstBatch:!0,errorDisplays:[]},window.onresize=n.updateDimensions,window.onkeydown=n.handleKeyPress,document.ondragover=C,document.ondragenter=C,document.ondragleave=C,document.ondrop=n.handleDropEvent,n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"syncPlaybackRates",value:function(e){var t=this.state.displays;t.forEach(function(t){return t.playbackRate=e}),this.setState({displays:t})}},{key:"distributeTimes",value:function(e){var t=this.state.displays.filter(function(t){return t.file===e.file}),n=t.indexOf(e),a=[e].concat(Object(o.a)(t.slice(n+1)),Object(o.a)(t.slice(0,n))),i=e.video.currentTime,r=e.video.duration,l=r/a.length;a.forEach(function(e,t){var n=i+l*t;e.video.currentTime=n<r?n:n-r})}},{key:"fillGrid",value:function(e,t){var n=this,a=this.state.displays,i=t-a.length;if(!(i<1)){var r=Object(o.a)(Array(i)).map(function(t,a){var i=n.copyDisplay(e);return i.id+=a,i});this.setState({displays:a.concat(r),maxId:r.pop().id})}}}]),Object(d.a)(t,[{key:"getVideoSize",value:function(){var e=this.state,t=e.displays,n=e.aspectRatio,a=e.viewport;if(!a)return{width:1,height:1};if(t.length<2)return{width:a.x,height:a.y};for(var i=0,r=0,l=0,o=n.ratio,s=1;s<=t.length;s++){var c=Math.ceil(t.length/s),u=Math.floor(a.x/c),d=Math.floor(a.y/s),m=u,f=d;o>u/d?f=m/o:m=f*o;var h=m*f;h<i||(i=h,r=u,l=d)}return{width:r,height:l}}},{key:"adjustVideoSpeed",value:function(e,t){e.playbackRate=e.playbackRate*t,this.setState({displays:this.state.displays})}},{key:"setVideoIO",value:function(e,t){t in e?delete e[t]:e[t]=e.video.currentTime,this.setState({displays:this.state.displays})}},{key:"copyDisplay",value:function(e){var t=e.video,n=this.state.maxId+1,a=t.currentTime+60;return a>t.duration&&(a=0),{id:n,file:e.file,url:e.url,playbackRate:e.playbackRate,startTime:a,triggerResize:!1}}},{key:"addDisplayCopy",value:function(e){var t=this.copyDisplay(e);this.setState({maxId:t.id,displays:this.state.displays.concat(t)})}},{key:"deleteDisplay",value:function(e){this.setState({displays:this.state.displays.filter(function(t){return t!==e})})}},{key:"nextDimensionRatio",value:function(){var e=this.state.ratioIndex+1;e>=w.length&&(e=0),this.setState({ratioIndex:e,aspectRatio:w[e]})}},{key:"nextObjectFit",value:function(){var e=this.state.objectFitIndex+1;e>=R.length&&(e=0),this.setState({objectFitIndex:e,objectFit:R[e]})}},{key:"componentDidMount",value:function(){this.updateDimensions()}},{key:"getRecommendedAspectRatioIndex",value:function(){var e,t=(e=this.state.displays.map(function(e){return e.video.videoWidth/e.video.videoHeight})).reduce(function(e,t){return e+t},0)/e.length,n=Object(o.a)(w).sort(function(e,n){return Math.abs(t-n.ratio)-Math.abs(t-e.ratio)}).pop();return w.findIndex(function(e){return e.name===n.name})}},{key:"setRecommendedAspectRatio",value:function(){var e=this.getRecommendedAspectRatioIndex();this.setState({aspectRatio:w[e],ratioIndex:e})}},{key:"handleVideoError",value:function(e){var t=this.state,n=t.displays,a=t.errorDisplays;a.push(e),this.setState({displays:n.filter(function(t){return t!==e}),errorDisplays:a})}},{key:"reorderDisplays",value:function(e){var t=this.state,n=t.displays,a=t.dragSrc;if(a){var i=n.filter(function(t){return t.video===e}).pop()||n[n.length-1],r=n.indexOf(a),l=[].concat(Object(o.a)(n.slice(0,r)),Object(o.a)(n.slice(r+1))),s=l.indexOf(i),c=[].concat(Object(o.a)(l.slice(0,s+1)),[a],Object(o.a)(l.slice(s+1)));this.setState({displays:c})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.displays,a=t.errorDisplays,r=t.activeDisplay,l=t.showThumbnails,o=t.showHelp,s=t.aspectRatio,c=t.objectFit,u=this.getVideoSize();return i.a.createElement(i.a.Fragment,null,i.a.createElement("main",{ref:this.viewport,onDrop:function(t){return e.reorderDisplays(t.target)}},0===n.length&&j,n.map(function(t){return i.a.createElement(E,{size:u,objectFit:c,key:t.id,display:t,showOverlay:t===r,showThumbnail:l,playbackRate:t.playbackRate,onDrag:function(t){return e.setState({dragSrc:t})},onMouseOver:function(){return e.setState({activeDisplay:t,lastDisplay:t})},onMouseOut:function(){return e.setState({activeDisplay:void 0})},onLoad:function(){return t.triggerResize&&e.setRecommendedAspectRatio()},onError:function(){return e.handleVideoError(t)},inTime:t.in,outTime:t.out,removeCallback:function(){return e.deleteDisplay(t)},copyCallback:function(){return e.addDisplayCopy(t)},exclusiveCallback:function(){return e.setState({displays:[t]})},staggerCallback:function(){return e.distributeTimes(t)},inCallback:function(){return e.setVideoIO(t,"in")},outCallback:function(){return e.setVideoIO(t,"out")},speedCallback:function(n){return e.adjustVideoSpeed(t,n)}})})),a.length>0&&i.a.createElement(x,{errorDisplays:a,dismissCallback:function(){return e.setState({errorDisplays:[]})}}),o&&i.a.createElement(D,Object.assign({aspectRatio:s,objectFit:c},{aspectRatioCallback:function(t){return e.setState({aspectRatio:t})},objectFitCallback:function(t){return e.setState({objectFit:t})}})))}}]),t}(i.a.Component),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(i.a.createElement(F,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");I?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):A(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):A(t,e)})}}()},9:function(e,t,n){e.exports=n(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.b9d503d7.chunk.js.map