(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(23)},18:function(e,t,a){},19:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),o=a(1),c=a(11),s=a(4);function u(e){(e.requestFullscreen||e.msRequestFullscreen||e.webkitRequestFullscreen).call(e)}var d=document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled,m=(document.exitFullscreen||document.msExitFullscreen||document.webkitExitFullscreen).bind(document);var p=navigator.userAgent.indexOf(" Trident/")>-1?"IE":navigator.userAgent.indexOf(" Edge/")>-1?"Edge":"Chrome",f=["Edge","IE"].indexOf(p)>-1,y={edge:{left:116,right:220,bottom:24},chrome:{left:24,right:24,bottom:16}}["Chrome"===p?"chrome":"edge"],v=function(e){var t=e.src,a=e.offset,n=e.timestamp,l=e.width,i=void 0===l?196:l,o=r.a.useRef(null);return o.current&&(o.current.currentTime=n),r.a.createElement("video",{className:"thumbnail",ref:o,controls:!1,autoPlay:!1,loop:!1,muted:!0,src:t,width:i,style:{left:a-i/2}})},b=10;function h(e){var t=e.offset,a=e.color,n={bottom:y.bottom+b/2,left:y.left+t-b/2};return r.a.createElement("svg",{className:"iomarker",width:b,height:b,viewBox:"0 0 2 2",style:n},r.a.createElement("circle",{cx:1,cy:1,r:1,fill:a}))}var E=function(e){var t=e.inTime,a=e.outTime,n=e.video;if(!t&&!a)return null;var l=n.duration,i=t||0,o=a||l,c=n.width-y.left-y.right,s=i/l*c,u=o/l*c;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{offset:s,color:"gold"}),r.a.createElement(h,{offset:u,color:"gold"}))},g=(a(18),function(e,t){return t in e&&e[t]()}),w=80,O=y.bottom+8,j=function(){var e=r.a.useState(),t=Object(s.a)(e,2),a=t[0],n=t[1];return[a,r.a.useCallback(function(e){return n(e)},[])]},k=3e3;function T(e){var t=e.showThumbnail,a=e.display,n=e.onLoad,l=e.size,i=e.objectFit,o=e.dispatch,c=e.index,d=j(),m=Object(s.a)(d,2),b=m[0],h=m[1],T=r.a.useState(),x=Object(s.a)(T,2),R=x[0],C=x[1],F=r.a.useState(),S=Object(s.a)(F,2),A=S[0],D=S[1];r.a.useEffect(function(){b&&(a.video=b,b.playbackRate=a.playbackRate,b.onerror=function(){return o({type:"handleDisplayError",payload:c})},b.onloadedmetadata=n,b.onloadeddata=function(e){return b.currentTime=b.duration/2},b.ondragstart=function(e){e.target.height-e.offsetY<w?e.preventDefault():o({type:"setPartialState",payload:{dragSrc:a}})},b.ontimeupdate=function(e){var t=a.out&&a.out<b.currentTime,n=a.in&&a.in>b.currentTime;(t||n)&&(b.currentTime=a.in||0)})},[a,b,n,o,c]);var I=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=b.duration*e),b.currentTime=(b.currentTime+e+b.duration)%b.duration},P={arrowleft:function(){return I(-.1,!0)},arrowright:function(){return I(.1,!0)},f:function(){return b&&u(b)}},H={m:function(){b.muted=!b.muted},arrowleft:function(){return I(-60)},arrowright:function(){return I(60)}};return r.a.createElement("div",{className:"display",onMouseOver:function(){o({type:"setPartialState",payload:{activeIndex:c}})},onMouseMove:function(e){if(R&&clearTimeout(R),C(setTimeout(function(){return C(void 0)},k)),t&&"IE"!==p){var a=[e.nativeEvent.layerX,e.nativeEvent.layerY],n=a[0],r=a[1];if(b.height-r>O)return D(void 0);var l=b.width-y.left-y.right,i=(n-y.left)/l;if(i<0||i>1)return D(void 0);var o=b.duration*i;D({offset:n,timestamp:o})}},onMouseOut:function(){D(void 0),o({type:"setPartialState",payload:{activeIndex:void 0}})},onKeyDown:function(e){return g(e.shiftKey?P:H,e.key.toLowerCase())}},R&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"display-border",style:{pointerEvents:f?"none":"auto"}},a.file.name,1!==a.playbackRate&&" (".concat(a.playbackRate,"x)")),r.a.createElement("div",{className:"display-controls"},r.a.createElement("button",{onClick:function(){return o({type:"removeActive"})}},"X"),r.a.createElement("button",{onClick:function(){return o({type:"copyDisplay",payload:c})}},"C"),r.a.createElement("button",{onClick:function(){return o({type:"setExclusive",payload:c})}},"E"),r.a.createElement("button",{onClick:function(){return o({type:"setActiveIO",payload:"in"})}},"I"),r.a.createElement("button",{onClick:function(){return o({type:"setActiveIO",payload:"out"})}},"O"),r.a.createElement("button",{onClick:function(){return o({type:"adjustActivePlaybackRate",payload:2})}},"\xbb"),r.a.createElement("button",{onClick:function(){return o({type:"adjustActivePlaybackRate",payload:.5})}},"\xab")),r.a.createElement(E,{inTime:a.in,outTime:a.out,video:b})),t&&A&&r.a.createElement(v,Object.assign({src:a.url},A)),r.a.createElement("video",Object.assign({controls:!0,autoPlay:!0,loop:!0,muted:!0,ref:h,src:a.url,draggable:!f},l,{style:{objectFit:i}})))}a(19);var x=a(5),R=a(2),C=a(6),F=a.n(C),S=a(3),A=["contain","cover","fill","scale-down"],D=function(e){return Object(R.a)({},e,{id:F()(),startTime:e.video?(e.video.currentTime+60)%e.video.duration:0})},I=function(e,t){return e[(e.indexOf(t)+1)%e.length]},P=function(e,t){return[].concat(Object(o.a)(e.slice(0,t)),Object(o.a)(e.slice(t+1)))},H=function(e,t){var a=function(t){var a=e.activeIndex;if(void 0===a)return e;var n=e.displays,r=[].concat(Object(o.a)(n.slice(0,a)),[Object(R.a)({},n[a],t(n[a]))],Object(o.a)(n.slice(a+1)));return Object(R.a)({},e,{displays:r})},n=function(t){var a=e.displays.map(function(e){return Object(R.a)({},e,t(e))});return Object(R.a)({},e,a)};switch(t.type){case"nextAspect":return Object(R.a)({},e,{aspect:I(S,e.aspect)});case"nextFit":return Object(R.a)({},e,{fit:I(A,e.fit)});case"setExclusive":return Object(R.a)({},e,{activeIndex:0,displays:[e.displays[t.payload]]});case"toggleHelp":return Object(R.a)({},e,{showHelp:!e.showHelp});case"toggleThumbnails":return Object(R.a)({},e,{showThumbnails:!e.showThumbnails});case"setPartialState":return Object(R.a)({},e,t.payload);case"toggleFullscreen":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;d&&(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement?m():u(e))}(),e;case"removeActive":return void 0===e.activeIndex?e:Object(R.a)({},e,{displays:P(e.displays,e.activeIndex)});case"copyDisplay":var r=[].concat(Object(o.a)(e.displays),[D(e.displays[t.payload])]);return Object(R.a)({},e,{displays:r});case"reorderDisplays":var l=e.dragSrc;if(void 0===l)return e;var i=e.displays,c=i.indexOf(l),s=i.findIndex(function(e){return e.video===t.payload})||i.length-1,p=c>s?[].concat(Object(o.a)(i.slice(0,s)),[i[c]],Object(o.a)(i.slice(s,c)),Object(o.a)(i.slice(c+1))):[].concat(Object(o.a)(i.slice(0,c)),Object(o.a)(i.slice(c+1,s+1)),[i[c]],Object(o.a)(i.slice(s+1)));return Object(R.a)({},e,{displays:p});case"addCopies":var f=e.activeIndex;if(void 0===f)return e;var y=[].concat(Object(o.a)(e.displays),Object(o.a)(Object(o.a)(Array(t.payload)).map(function(){return D(e.displays[f])})));return Object(R.a)({},e,{displays:y});case"updateDisplay":var v=Object(o.a)(e.displays),b=t.payload,h=b.index,E=b.updates;return v[h]=Object(R.a)({},v[h],E),Object(R.a)({},e,{displays:v});case"applyToActive":return a(t.payload);case"applyToAll":return n(t.payload);case"setActiveIO":var g=t.payload;return a(function(e){return Object(x.a)({},g,void 0===e[g]?e.video.currentTime:void 0)});case"addFiles":var w=t.payload.map(function(e){return{id:F()(),file:e,url:URL.createObjectURL(e),playbackRate:1}});return Object(R.a)({},e,{firstLoad:!1,showHelp:e.showHelp&&0===w.length,displays:[].concat(Object(o.a)(e.displays),Object(o.a)(w))});case"handleDisplayError":var O=t.payload;return Object(R.a)({},e,{errorDisplays:[].concat(Object(o.a)(e.errorDisplays),[e.displays[O]]),displays:P(e.displays,O)});case"dismissErrors":return Object(R.a)({},e,{errorDisplays:[]});case"distributeTimes":var j=e.activeIndex;if(void 0===j)return e;var k=e.displays[j],T=k.video,C=k.file;if(!T)return e;var H=e.displays.filter(function(e){return e.file===C}),L=[k].concat(Object(o.a)(H.slice(j+1)),Object(o.a)(H.slice(0,j))),M=T.currentTime,W=T.duration,U=W/L.length;return L.forEach(function(e,t){var a=M+U*t;e.video.currentTime=a%W}),e;case"adjustActivePlaybackRate":return a(function(e){return{playbackRate:e.playbackRate*t.payload}});case"syncPlaybackRates":return n(function(e){return{playbackRate:t.payload}})}},L=r.a.createElement("section",{id:"shortcuts"},r.a.createElement("h2",null,"Shortcuts"),r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement("em",null,"C:")," Clone video (+1m)"),r.a.createElement("li",null,r.a.createElement("em",null,"D:")," Distribute times"),r.a.createElement("li",null,r.a.createElement("em",null,"E:")," Remove everything else"),r.a.createElement("li",null,r.a.createElement("em",null,"F:")," Toggle fullscreen"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift+F:")," Fullscreen video"),r.a.createElement("li",null,r.a.createElement("em",null,"H:")," Toggle help"),r.a.createElement("li",null,r.a.createElement("em",null,"I:")," Toggle in point"),r.a.createElement("li",null,r.a.createElement("em",null,"O:")," Toggle out point"),r.a.createElement("li",null,r.a.createElement("em",null,"M:")," Toggle mute"),r.a.createElement("li",null,r.a.createElement("em",null,"R:")," Remove video"),r.a.createElement("li",null,r.a.createElement("em",null,"S:")," Change video scaling"),r.a.createElement("li",null,r.a.createElement("em",null,"X:")," Change aspect ratio"),r.a.createElement("li",null,r.a.createElement("em",null,"\u2190 \u2192:")," Skip 1m"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift \u2190 \u2192:")," Skip 10%"),r.a.createElement("li",null,r.a.createElement("em",null,"Ctrl \u2190 \u2192:")," Change speed"),r.a.createElement("li",null,r.a.createElement("em",null,"Shift+S")," Sync speeds"),r.a.createElement("li",null,r.a.createElement("em",null,"Ctrl+W:")," Close tab"),r.a.createElement("li",null,r.a.createElement("em",null,"O,O:")," Restart video"),r.a.createElement("li",null,r.a.createElement("em",null,"2-9:")," Fill 2-9 size grid"),r.a.createElement("li",null,r.a.createElement("em",null,"Drag+Drop:")," Reorder videos"))),M=r.a.createElement("footer",null,r.a.createElement("h2",null,"Privacy Disclaimer"),r.a.createElement("p",null,"This tool records ",r.a.createElement("b",null,"no")," filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded."));function W(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:e.name},e.label),r.a.createElement("select",{name:e.name,value:e.value,onChange:function(t){return e.callback(t.target.value)}},e.choices))}var U=function(e){return r.a.createElement("section",{id:"help"},r.a.createElement("h2",null,"Usage"),r.a.createElement("p",null,"Drag and drop any number of videos to auto-play in an optimally arranged grid."),r.a.createElement("section",{id:"settings"},r.a.createElement("h2",null,"Settings"),r.a.createElement("form",null,r.a.createElement(W,{name:"objectScale",label:"Video Fit/Fill",value:e.objectFit,choices:A.map(function(e){return r.a.createElement("option",{key:e,value:e},e[0].toUpperCase()+e.substr(1))}),callback:function(t){return e.objectFitCallback(t)}}),r.a.createElement("br",null),r.a.createElement(W,{name:"aspectRatio",label:"Aspect Ratio",value:S.indexOf(e.aspectRatio).toString(),choices:S.map(function(e,t){return r.a.createElement("option",{key:t,value:t},e.name)}),callback:function(t){return e.aspectRatioCallback(S[parseInt(t)])}}),r.a.createElement("br",null))),L,M)};function N(e){var t=e.errorDisplays,a=e.dismissCallback;return r.a.createElement("section",{id:"errors"},r.a.createElement("h2",null,"Errors"),r.a.createElement("ol",null,t.map(function(e,t){return r.a.createElement("li",{key:t},e.file.name," (",e.file.type,")")})),r.a.createElement("p",null,"Only videos supported by your web browser will play successfully.  ",r.a.createElement("code",null,".mp4")," and ",r.a.createElement("code",null,".webm")," files are good bets."),r.a.createElement("form",{onSubmit:a},r.a.createElement("button",null,"Dismiss")))}function K(){return r.a.createElement("section",{id:"splash"},r.a.createElement("p",null,"Auto-play any number of videos or copies of videos in an optimally arranged grid with simple drag-and-drop.  Videos start half-way in and loop, ensuring immediate, continuous immersion, great for scouring surveillance footage, finding the best highlights from your last gaming stream, and more!"),r.a.createElement("p",null,"Find your favourite moments quickly with thumbnail scrubbing and keyboard shortcuts to jump ahead in time 1m (\u2192) or 10% (Shift \u2192), or adjust playback speed (Ctrl \u2192)."),r.a.createElement("p",null,"Use shortcut keys to rapidly (c)opy or (r)emove displays, set (i)n/(o)ut loop points, (f)ullscreen the display, toggle (m)ute, etc."))}a(22);var q=function(e){return e.reduce(function(e,t){return e+t},0)/e.length};function z(e){e.preventDefault(),e.stopPropagation()}var B=function(){var e=r.a.useReducer(H,{showHelp:!0,showThumbnails:!0,firstLoad:!0,displays:[],errorDisplays:[],aspect:S[0],fit:A[0]}),t=Object(s.a)(e,2),a=t[0],n=a.displays,l=Object(c.a)(a,["displays"]),i=t[1],u=r.a.useRef(null),d={f:{type:"toggleFullscreen"},h:{type:"toggleHelp"},s:{type:"nextFit"},t:{type:"toggleThumbnails"},x:{type:"nextAspect"}};r.a.useLayoutEffect(function(){var e=function(){var e=u.current,t={viewport:{width:e.clientWidth,height:e.clientHeight}};i({type:"setPartialState",payload:t})};window.onresize=function(){return e()},e()},[]),r.a.useEffect(function(){document.ondragover=z,document.ondragenter=z,document.ondragleave=z},[]),r.a.useEffect(function(){window.onkeydown=function(e){var t=e.key.toLowerCase();if(t in d&&!e.shiftKey&&!e.ctrlKey)return i(d[t]);var a=l.activeIndex;if(void 0!==a){var r={arrowleft:{type:"adjustActivePlaybackRate",payload:.5},arrowright:{type:"adjustActivePlaybackRate",payload:2}},o={s:{type:"syncPlaybackRates",payload:n[a].video.playbackRate}},c={delete:{type:"removeActive"},c:{type:"copyDisplay",payload:a},d:{type:"distributeTimes",payload:a},e:{type:"setExclusive",payload:a},i:{type:"setActiveIO",payload:"in"},o:{type:"setActiveIO",payload:"out"},r:{type:"removeActive"}};e.shiftKey?t in o&&i(o[t]):e.ctrlKey?t in r&&i(r[t]):(t in c&&i(c[t]),t>="1"&&t<="9"&&(i({type:"addCopies",payload:parseInt(t)}),i({type:"distributeTimes",payload:a})))}}},[n,l.activeIndex,d]),r.a.useEffect(function(){document.ondrop=function(e){if(z(e),e.dataTransfer){var t=e.dataTransfer.files;i({type:"addFiles",payload:Array.from(t)})}}},[]);var m=function(){var e=q(n.map(function(e){return e.video.videoWidth/e.video.videoHeight}));return Object(o.a)(S).sort(function(t,a){return Math.abs(e-a.ratio)-Math.abs(e-t.ratio)}).pop()},p=r.a.useMemo(function(){return function(e,t,a){for(var n=0,r=0,l=0,i=1;i<=t;i++){var o=Math.ceil(t/i),c=Math.floor(a.width/o),s=Math.floor(a.height/i),u=c,d=s;e>c/s?d=u/e:u=d*e;var m=u*d;m<n||(n=m,r=c,l=s)}return{width:r,height:l}}(l.aspect.ratio,n.length,l.viewport||{width:1,height:1})},[l.aspect,n,l.viewport]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{ref:u,onDrop:function(e){return i({type:"reorderDisplays",payload:e.target})}},0===n.length&&r.a.createElement(K,null),n.map(function(e,t){return r.a.createElement(T,{key:e.id,size:p,objectFit:l.fit,display:e,showThumbnail:l.showThumbnails,onLoad:function(){return i({type:"setPartialState",payload:{aspect:m()}})},dispatch:i,index:t})})),l.errorDisplays.length>0&&r.a.createElement(N,{errorDisplays:l.errorDisplays,dismissCallback:function(){return i({type:"dismissErrors"})}}),l.showHelp&&r.a.createElement(U,{aspectRatio:l.aspect,objectFit:l.fit,aspectRatioCallback:function(e){return i({type:"setPartialState",payload:{aspect:e}})},objectFitCallback:function(e){return i({type:"setPartialState",payload:{fit:e}})}}))},V=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(B,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");V?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):X(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):X(t,e)})}}()},3:function(e){e.exports=[{ratio:1.7777777777777777,name:"16:9 (High Def)"},{ratio:1.3333333333333333,name:"4:3 (Standard Def)"},{ratio:1,name:"1:1 (Square)"},{ratio:.5625,name:"9:16 (Vertical HD)"},{ratio:1.85,name:"1.85:1 (Cinematic)"},{ratio:2.35,name:"2.35:1 (Anamorphic)"}]}},[[12,1,2]]]);
//# sourceMappingURL=main.4d6cbfb7.chunk.js.map