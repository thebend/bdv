(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(7),o=n.n(r),l=n(8),s=n(1),c=n(2),u=n(4),d=n(3),m=n(5),p=(n(15),[{ratio:16/9,name:"16:9 (High Definition)"},{ratio:4/3,name:"4:3 (Standard Definition)"},{ratio:1,name:"1:1 (Square)"},{ratio:9/16,name:"9:16 (Vertical HD)"},{ratio:1.85,name:"1.85:1 (Cinematic Wide)"},{ratio:2.35,name:"2.35:1 (Anamorphic Wide)"}]),f=["contain","cover","fill","scale-down"],h=i.a.createElement("section",{id:"help"},i.a.createElement("h2",null,"Usage"),i.a.createElement("p",null,"Drag and drop any number of videos to auto-play in an optimally arranged grid."),i.a.createElement("p",null,"Videos start half-way in and loop, ensuring immediate, continuous action, but also start muted to avoid chaotic, clashing audio and prevent disturbing others."),i.a.createElement("h2",null,"Shortcuts"),i.a.createElement("ol",null,i.a.createElement("li",null,i.a.createElement("em",null,"C:")," Clone video (+1m)"),i.a.createElement("li",null,i.a.createElement("em",null,"D:")," Delete video"),i.a.createElement("li",null,i.a.createElement("em",null,"H:")," Toggle help"),i.a.createElement("li",null,i.a.createElement("em",null,"I:")," Toggle info overlay"),i.a.createElement("li",null,i.a.createElement("em",null,"M:")," Toggle mute"),i.a.createElement("li",null,i.a.createElement("em",null,"S:")," Change video scaling"),i.a.createElement("li",null,i.a.createElement("em",null,"X:")," Change aspect ratio"),i.a.createElement("li",null,i.a.createElement("em",null,"\u2190 \u2192:")," Skip 1m"),i.a.createElement("li",null,i.a.createElement("em",null,"Ctrl+W:")," Close tab"),i.a.createElement("li",null,i.a.createElement("em",null,"F / F11:")," Toggle fullscreen")),i.a.createElement("footer",null,i.a.createElement("h2",null,"Privacy Disclaimer"),i.a.createElement("p",null,"This tool records ",i.a.createElement("b",null,"no")," filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded.")));function v(e){e.preventDefault(),e.stopPropagation()}function y(e,t){var n=e.video;if(n){var a=n.seekable.end(0)-n.currentTime;n.currentTime=t>a?t-a:n.currentTime+t}}var g=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).video=i.a.createRef(),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.display,n=e.onLoad,a=e.onError,i=this.video.current;t.video=i,t.startTime?i.currentTime=t.startTime:(i.onerror=a,i.onloadeddata=function(e){return i.currentTime=i.seekable.end(0)/2},i.onloadedmetadata=n)}},{key:"render",value:function(){var e=this.props,t=e.size,n=e.onMouseOver,a=e.onMouseOut,r=e.display,o=e.objectFit;return i.a.createElement("div",Object.assign({className:"display"},t,{onMouseOver:n,onMouseOut:a}),i.a.createElement("div",{className:"display-border",style:{width:"".concat(t.width,"px"),height:"".concat(t.height,"px")}}),i.a.createElement("video",Object.assign({controls:!0,autoPlay:!0,loop:!0,muted:!0,src:r.url},t,{ref:this.video,style:{objectFit:o}})))}}]),t}(i.a.Component);var E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).viewport=void 0,n.globalActions={f:function(){document.fullscreenEnabled&&(document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen())},h:function(){return n.setState({showHelp:!n.state.showHelp})},i:function(){return n.setState({showInfo:!n.state.showInfo})},s:function(){return n.nextObjectFit()},x:function(){return n.nextDimensionRatio()}},n.viewport=i.a.createRef(),n.state={showInfo:!1,showHelp:!0,displays:[],maxId:0,ratioIndex:0,aspectRatio:p[0],objectFitIndex:0,objectFit:f[0],firstBatch:!0,errorDisplays:[]},window.onresize=function(){return n.updateDimensions()},window.onkeydown=function(e){var t=e.key,a=t.toLowerCase()==t?t.toUpperCase():t.toLowerCase();if(t in n.globalActions)n.globalActions[t]();else if(a in n.globalActions)n.globalActions[a]();else{var i=n.state.activeDisplay;if(i){var r={Delete:function(){return n.deleteDisplay(i)},d:function(){return n.deleteDisplay(i)},c:function(){return n.copyDisplay(i)},ArrowLeft:function(){return y(i,-60)},ArrowRight:function(){return y(i,60)},m:function(){var e;(e=i.video)&&(e.muted=!e.muted)}};t in r?r[t]():a in r&&r[a]()}}},document.ondragover=v,document.ondragenter=v,document.ondragleave=v,document.ondrop=function(e){if(v(e),e.dataTransfer){var t=n.state.firstBatch,a=e.dataTransfer.files,i=Array.from(a).filter(function(e){return e.type.startsWith("video/")}),r=n.state.maxId,o=i.map(function(e){return{id:++r,file:e,url:URL.createObjectURL(e),triggerResize:t}});n.setState({displays:n.state.displays.concat(o),maxId:r,firstBatch:!1,showHelp:n.state.showHelp&&0==i.length})}},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"getVideoSize",value:function(){var e=this.state,t=e.displays,n=e.aspectRatio,a=e.viewport;if(!a)return{width:1,height:1};if(t.length<2)return{width:a.x,height:a.y};for(var i=0,r=0,o=0,l=1;l<t.length;l++){var s=Math.ceil(t.length/l),c=a.x/s,u=a.y*n.ratio/l;if(!(i<=c&&i<=u))break;i=Math.min(c,u),r=l,o=s}return{width:a.x/o,height:a.y/r}}},{key:"updateDimensions",value:function(){var e=this.viewport.current,t={x:e.clientWidth,y:e.clientHeight};this.setState({viewport:t})}},{key:"copyDisplay",value:function(e){var t=e.video,n=this.state.maxId+1,a=t.currentTime+60;a>t.seekable.end(0)&&(a=0);var i={id:n,file:e.file,url:e.url,startTime:a,triggerResize:!1};this.setState({maxId:n,displays:this.state.displays.concat(i)})}},{key:"deleteDisplay",value:function(e){this.setState({displays:this.state.displays.filter(function(t){return t!=e})})}},{key:"nextDimensionRatio",value:function(){var e=this.state.ratioIndex+1;e>=p.length&&(e=0),this.setState({ratioIndex:e,aspectRatio:p[e]})}},{key:"nextObjectFit",value:function(){var e=this.state.objectFitIndex+1;e>=f.length&&(e=0),this.setState({objectFitIndex:e,objectFit:f[e]})}},{key:"componentDidMount",value:function(){this.updateDimensions()}},{key:"getAspectRatios",value:function(){return this.state.displays.map(function(e){return e.video.videoWidth/e.video.videoHeight})}},{key:"getRecommendedAspectRatioIndex",value:function(){var e=this.getAspectRatios().reduce(function(e,t){return e+t},0)/this.state.displays.length,t=Object(l.a)(p).sort(function(t,n){return Math.min(t.ratio/e,e/t.ratio)-Math.min(n.ratio/e,e/n.ratio)}).pop();return p.findIndex(function(e){return e.name==t.name})}},{key:"setRecommendedAspectRatio",value:function(){var e=this.getRecommendedAspectRatioIndex();this.setState({aspectRatio:p[e],ratioIndex:e})}},{key:"handleVideoError",value:function(e){var t=this.state,n=t.displays,a=t.errorDisplays;a.push(e),this.setState({displays:n.filter(function(t){return t!=e}),errorDisplays:a})}},{key:"render",value:function(){var e=this,t=this.state,n=t.displays,a=t.errorDisplays,r=(t.activeDisplay,t.lastDisplay),o=t.showInfo,l=t.showHelp,s=t.aspectRatio,c=t.objectFit,u=this.getVideoSize();return i.a.createElement(i.a.Fragment,null,o&&r&&i.a.createElement("div",{id:"info-toggle"},s.name,i.a.createElement("br",null),"Scale strategy: ",c,i.a.createElement("br",null),r.file.name),i.a.createElement("main",{ref:this.viewport},n.map(function(t){return i.a.createElement(g,{size:u,objectFit:c,key:t.id,display:t,onMouseOver:function(){return e.setState({activeDisplay:t,lastDisplay:t})},onMouseOut:function(){return e.setState({activeDisplay:void 0})},onLoad:function(){return t.triggerResize&&e.setRecommendedAspectRatio()},onError:function(){return e.handleVideoError(t)}})})),a.length>0&&i.a.createElement("section",{id:"errors"},i.a.createElement("h2",null,"Errors"),i.a.createElement("ol",null,a.map(function(e,t){return i.a.createElement("li",{key:t},e.file.name," (",e.file.type,")")})),i.a.createElement("p",null,"Only videos supported by your web browser will play successfully.  ",i.a.createElement("code",null,".mp4")," and ",i.a.createElement("code",null,".webm")," files are good bets."),i.a.createElement("form",{onSubmit:function(){return e.setState({errorDisplays:[]})}},i.a.createElement("button",null,"Dismiss"))),l&&h)}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){e.exports=n(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.be8e5bc6.chunk.js.map