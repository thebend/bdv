(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(8),o=a.n(r),l=a(1),s=a(3),c=a(2),u=a(5),d=a(4),m=a(6),f=(a(15),[{ratio:16/9,name:"16:9 (High Definition)"},{ratio:4/3,name:"4:3 (Standard Definition)"},{ratio:1,name:"1:1 (Square)"},{ratio:9/16,name:"9:16 (Vertical HD)"},{ratio:1.85,name:"1.85:1 (Cinematic Wide)"},{ratio:2.35,name:"2.35:1 (Anamorphic Wide)"}]),p=["contain","cover","fill","scale-down"],h=i.a.createElement("section",{id:"splash"},i.a.createElement("p",null,"Videos start half-way in and loop, ensuring immediate, continuous action, but also start muted to avoid chaotic, clashing audio and prevent disturbing others.")),v=i.a.createElement("section",{id:"help"},i.a.createElement("h2",null,"Usage"),i.a.createElement("p",null,"Drag and drop any number of videos to auto-play in an optimally arranged grid."),i.a.createElement("p",null,"Videos start half-way in and loop, ensuring immediate, continuous action, but also start muted to avoid chaotic, clashing audio and prevent disturbing others."),i.a.createElement("h2",null,"Shortcuts"),i.a.createElement("ol",null,i.a.createElement("li",null,i.a.createElement("em",null,"C:")," Clone video (+1m)"),i.a.createElement("li",null,i.a.createElement("em",null,"D:")," Distribute times"),i.a.createElement("li",null,i.a.createElement("em",null,"H:")," Toggle help"),i.a.createElement("li",null,i.a.createElement("em",null,"M:")," Toggle mute"),i.a.createElement("li",null,i.a.createElement("em",null,"R:")," Delete video"),i.a.createElement("li",null,i.a.createElement("em",null,"S:")," Change video scaling"),i.a.createElement("li",null,i.a.createElement("em",null,"X:")," Change aspect ratio"),i.a.createElement("li",null,i.a.createElement("em",null,"\u2190 \u2192:")," Skip 1m"),i.a.createElement("li",null,i.a.createElement("em",null,"Shift \u2190 \u2192:")," Skip 10%"),i.a.createElement("li",null,i.a.createElement("em",null,"Ctrl \u2190 \u2192:")," Change speed"),i.a.createElement("li",null,i.a.createElement("em",null,"Shift+S")," Sync speeds"),i.a.createElement("li",null,i.a.createElement("em",null,"Ctrl+W:")," Close tab"),i.a.createElement("li",null,i.a.createElement("em",null,"F / F11:")," Toggle fullscreen"),i.a.createElement("li",null,i.a.createElement("em",null,"I / O:")," Toggle in / out time"),i.a.createElement("li",null,"Drag&Drop: Reorder videos")),i.a.createElement("footer",null,i.a.createElement("h2",null,"Privacy Disclaimer"),i.a.createElement("p",null,"This tool records ",i.a.createElement("b",null,"no")," filenames, screen grabs, or any other methods of identifying the actual contents of any video.  Only metadata about a video's format (codec, file size, resolution, and duration) may be recorded.")));function y(e){e.preventDefault(),e.stopPropagation()}function g(e){var t=e.offset,a=e.xPadding,n=e.color;return i.a.createElement("svg",{className:"iomarker",width:10,height:10,style:{bottom:21,left:a+t-5},viewBox:"0 0 2 2"},i.a.createElement("circle",{cx:1,cy:1,r:1,fill:n}))}function b(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.video;if(n){var i=n.duration;a&&(t*=i);var r=i-n.currentTime;n.currentTime=t>r?t-r:n.currentTime+t}}var E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).video=i.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"setIO",value:function(){var e=this.props,t=e.inTime,a=e.outTime,n=this.video.current;n.ontimeupdate=function(e){var i=a&&a<n.currentTime,r=t&&t>n.currentTime;(i||r)&&(n.currentTime=t||0)}}},{key:"componentDidUpdate",value:function(){var e=this.props.playbackRate||1;this.video.current.playbackRate=e,this.setIO()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.display,a=e.onLoad,n=e.onError,i=e.onDrag,r=this.video.current;t.video=r,t.startTime?r.currentTime=t.startTime:(r.onerror=n,r.onloadeddata=function(e){return r.currentTime=r.duration/2},r.onloadedmetadata=a),r.ondragstart=function(e){e.target.height-e.offsetY<80?e.preventDefault():i(t)},this.setIO()}},{key:"getIO",value:function(){var e=this.props,t=e.inTime,a=e.outTime,n=this.video.current;if(t||a){var r=.02*n.width,o=n.duration,l=t||0,s=a||o,c=n.width-2*r,u=l/o*c,d=s/o*c;return i.a.createElement(i.a.Fragment,null,i.a.createElement(g,{xPadding:r,offset:u,color:"green"}),i.a.createElement(g,{xPadding:r,offset:d,color:"red"}))}}},{key:"render",value:function(){var e=this.props,t=e.size,a=e.onMouseOver,n=e.onMouseOut,r=e.display,o=e.objectFit,l=e.showOverlay;return i.a.createElement("div",Object.assign({className:"display"},t,{onMouseOver:a,onMouseOut:n}),i.a.createElement("div",{className:"display-border",style:{width:"".concat(t.width,"px"),height:"".concat(t.height,"px")}},l&&r.file.name),l&&this.getIO(),i.a.createElement("video",Object.assign({controls:!0,autoPlay:!0,loop:!0,muted:!0,src:r.url,draggable:!0},t,{ref:this.video,style:{objectFit:o},title:r.file.name})))}}]),t}(i.a.Component);var w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).viewport=void 0,a.globalActions={f:function(){document.fullscreenEnabled&&(document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen())},h:function(){return a.setState({showHelp:!a.state.showHelp})},s:function(){return a.nextObjectFit()},x:function(){return a.nextDimensionRatio()}},a.viewport=i.a.createRef(),a.state={showInfo:!1,showHelp:!0,displays:[],maxId:0,ratioIndex:0,aspectRatio:f[0],objectFitIndex:0,objectFit:p[0],firstBatch:!0,errorDisplays:[]},window.onresize=function(){return a.updateDimensions()},window.onkeydown=function(e){var t=e.key.toLowerCase();if(t in a.globalActions&&!e.shiftKey&&!e.ctrlKey)a.globalActions[t]();else{var n=a.state.activeDisplay;if(n)if(e.shiftKey){var i={arrowleft:function(){return b(n,-.1,!0)},arrowright:function(){return b(n,.1,!0)},s:function(){return a.syncPlaybackRates(n.playbackRate)}};t in i&&i[t]()}else if(e.ctrlKey){var r={arrowleft:function(){return a.adjustVideoSpeed(n,.5)},arrowright:function(){return a.adjustVideoSpeed(n,2)}};t in r&&r[t]()}else{var o={delete:function(){return a.deleteDisplay(n)},c:function(){return a.copyDisplay(n)},d:function(){return a.distributeTimes(n)},i:function(){return a.setVideoIO(n,"in")},o:function(){return a.setVideoIO(n,"out")},m:function(){var e;(e=n.video)&&(e.muted=!e.muted)},r:function(){return a.deleteDisplay(n)},arrowleft:function(){return b(n,-60)},arrowright:function(){return b(n,60)}};t in o&&o[t]()}}},document.ondragover=y,document.ondragenter=y,document.ondragleave=y,document.ondrop=function(e){if(y(e),e.dataTransfer){var t=a.state.firstBatch,n=e.dataTransfer.files,i=Array.from(n).filter(function(e){return e.type.startsWith("video/")}),r=a.state.maxId,o=i.map(function(e){return{id:++r,file:e,url:URL.createObjectURL(e),triggerResize:t,playbackRate:1}});a.setState({displays:a.state.displays.concat(o),maxId:r,firstBatch:!1,showHelp:a.state.showHelp&&0==i.length})}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"syncPlaybackRates",value:function(e){var t=this.state.displays;t.forEach(function(t){return t.playbackRate=e}),this.setState({displays:t})}},{key:"distributeTimes",value:function(e){var t=this.state.displays.filter(function(t){return t.file==e.file}),a=t.indexOf(e),n=[e].concat(Object(l.a)(t.slice(a+1)),Object(l.a)(t.slice(0,a))),i=e.video.currentTime,r=e.video.duration,o=r/n.length;n.forEach(function(e,t){var a=i+o*t;e.video.currentTime=a<r?a:a-r})}}]),Object(c.a)(t,[{key:"getVideoSize",value:function(){var e=this.state,t=e.displays,a=e.aspectRatio,n=e.viewport;if(!n)return{width:1,height:1};if(t.length<2)return{width:n.x,height:n.y};for(var i=0,r=0,o=0,l=a.ratio,s=1;s<=t.length;s++){var c=Math.ceil(t.length/s),u=n.x/c,d=n.y/s,m=u,f=d;l>u/d?f=m/l:m=f*l;var p=m*f;p<i||(i=p,r=s,o=c)}return{width:n.x/o,height:n.y/r}}},{key:"adjustVideoSpeed",value:function(e,t){e.playbackRate=e.playbackRate*t,this.setState({displays:this.state.displays})}},{key:"setVideoIO",value:function(e,t){t in e?delete e[t]:e[t]=e.video.currentTime,this.setState({displays:this.state.displays})}},{key:"updateDimensions",value:function(){var e=this.viewport.current,t={x:e.clientWidth,y:e.clientHeight};this.setState({viewport:t})}},{key:"copyDisplay",value:function(e){var t=e.video,a=this.state.maxId+1,n=t.currentTime+60;n>t.duration&&(n=0);var i={id:a,file:e.file,url:e.url,playbackRate:e.playbackRate,startTime:n,triggerResize:!1};this.setState({maxId:a,displays:this.state.displays.concat(i)})}},{key:"deleteDisplay",value:function(e){this.setState({displays:this.state.displays.filter(function(t){return t!=e})})}},{key:"nextDimensionRatio",value:function(){var e=this.state.ratioIndex+1;e>=f.length&&(e=0),this.setState({ratioIndex:e,aspectRatio:f[e]})}},{key:"nextObjectFit",value:function(){var e=this.state.objectFitIndex+1;e>=p.length&&(e=0),this.setState({objectFitIndex:e,objectFit:p[e]})}},{key:"componentDidMount",value:function(){this.updateDimensions()}},{key:"getAspectRatios",value:function(){return this.state.displays.map(function(e){return e.video.videoWidth/e.video.videoHeight})}},{key:"getRecommendedAspectRatioIndex",value:function(){var e=this.getAspectRatios().reduce(function(e,t){return e+t},0)/this.state.displays.length,t=Object(l.a)(f).sort(function(t,a){return Math.min(t.ratio/e,e/t.ratio)-Math.min(a.ratio/e,e/a.ratio)}).pop();return f.findIndex(function(e){return e.name==t.name})}},{key:"setRecommendedAspectRatio",value:function(){var e=this.getRecommendedAspectRatioIndex();this.setState({aspectRatio:f[e],ratioIndex:e})}},{key:"handleVideoError",value:function(e){var t=this.state,a=t.displays,n=t.errorDisplays;n.push(e),this.setState({displays:a.filter(function(t){return t!=e}),errorDisplays:n})}},{key:"reorderDisplays",value:function(e){var t=this.state,a=t.displays,n=t.dragSrc;if(n){var i=a.filter(function(t){return t.video==e}).pop()||a[a.length-1],r=a.indexOf(n),o=[].concat(Object(l.a)(a.slice(0,r)),Object(l.a)(a.slice(r+1))),s=o.indexOf(i),c=[].concat(Object(l.a)(o.slice(0,s+1)),[n],Object(l.a)(o.slice(s+1)));this.setState({displays:c})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.displays,n=t.errorDisplays,r=t.activeDisplay,o=t.lastDisplay,l=t.showInfo,s=t.showHelp,c=t.aspectRatio,u=t.objectFit,d=this.getVideoSize();return i.a.createElement(i.a.Fragment,null,l&&o&&i.a.createElement("div",{id:"info-toggle"},c.name,i.a.createElement("br",null),"Scale strategy: ",u,i.a.createElement("br",null),o.file.name),i.a.createElement("main",{ref:this.viewport,onDrop:function(t){return e.reorderDisplays(t.target)}},0==a.length&&h,a.map(function(t){return i.a.createElement(E,{size:d,objectFit:u,key:t.id,display:t,showOverlay:t==r,playbackRate:t.playbackRate,onDrag:function(t){return e.setState({dragSrc:t})},onMouseOver:function(){return e.setState({activeDisplay:t,lastDisplay:t})},onMouseOut:function(){return e.setState({activeDisplay:void 0})},onLoad:function(){return t.triggerResize&&e.setRecommendedAspectRatio()},onError:function(){return e.handleVideoError(t)},inTime:t.in,outTime:t.out})})),n.length>0&&i.a.createElement("section",{id:"errors"},i.a.createElement("h2",null,"Errors"),i.a.createElement("ol",null,n.map(function(e,t){return i.a.createElement("li",{key:t},e.file.name," (",e.file.type,")")})),i.a.createElement("p",null,"Only videos supported by your web browser will play successfully.  ",i.a.createElement("code",null,".mp4")," and ",i.a.createElement("code",null,".webm")," files are good bets."),i.a.createElement("form",{onSubmit:function(){return e.setState({errorDisplays:[]})}},i.a.createElement("button",null,"Dismiss"))),s&&v)}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.74d7544d.chunk.js.map